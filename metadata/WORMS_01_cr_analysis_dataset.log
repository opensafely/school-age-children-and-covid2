2021-07-14T12:03:52.767400800Z 
2021-07-14T12:03:52.767430900Z   ___  ____  ____  ____  ____ (R)
2021-07-14T12:03:52.767435900Z  /__    /   ____/   /   ____/
2021-07-14T12:03:52.767439100Z ___/   /   /___/   /   /___/   16.1   Copyright 1985-2019 StataCorp LLC
2021-07-14T12:03:52.767442100Z   Statistics/Data Analysis            StataCorp
2021-07-14T12:03:52.767445100Z                                       4905 Lakeway Drive
2021-07-14T12:03:52.767448200Z                                       College Station, Texas 77845 USA
2021-07-14T12:03:52.767451200Z                                       800-STATA-PC        http://www.stata.com
2021-07-14T12:03:52.767454200Z                                       979-696-4600        stata@stata.com
2021-07-14T12:03:52.767457200Z                                       979-696-4601 (fax)
2021-07-14T12:03:52.767460100Z 
2021-07-14T12:03:52.767462800Z 3-user Stata network license expires 11 May 2022:
2021-07-14T12:03:52.767465600Z        Serial number:  501709312237
2021-07-14T12:03:52.767468400Z          Licensed to:  The Bennett Institute
2021-07-14T12:03:52.767471500Z                        Oxford University
2021-07-14T12:03:52.768198100Z 
2021-07-14T12:03:52.768215000Z Notes:
2021-07-14T12:03:52.768222000Z       1.  Unicode is supported; see help unicode_advice.
2021-07-14T12:03:52.768227700Z 
2021-07-14T12:03:52.768233000Z . do "analysis/WORMS_01_cr_analysis_dataset.wrapper.do" 
2021-07-14T12:03:52.768238800Z 
2021-07-14T12:03:52.768244200Z . . do "analysis/WORMS_01_cr_analysis_dataset.do" ""
2021-07-14T12:03:52.768250200Z 
2021-07-14T12:03:52.768255600Z . /*===========================================================================
2021-07-14T12:03:52.768261700Z > ===
2021-07-14T12:03:52.768267500Z > DO FILE NAME:                   WORMS_01_cr_analysis_dataset
2021-07-14T12:03:52.768273200Z > PROJECT:                                Exposure children and COVID risk
2021-07-14T12:03:52.768279300Z > DATE:                                   25th June 2020
2021-07-14T12:03:52.768285300Z > AUTHOR:                                 Harriet Forbes adapted from A Wong, A
2021-07-14T12:03:52.768291100Z >  Schultze, C Rentsch,
2021-07-14T12:03:52.768296300Z >                                                  K Baskharan, E Williamson
2021-07-14T12:03:52.768301900Z > DESCRIPTION OF FILE:    program 00, data management for project
2021-07-14T12:03:52.768307400Z >                                                 reformat variables
2021-07-14T12:03:52.768313400Z >                                                 categorise variables
2021-07-14T12:03:52.768318600Z >                                                 label variables
2021-07-14T12:03:52.768323600Z >                                                 apply exclusion criteria
2021-07-14T12:03:52.768399900Z > DATASETS USED:                  data in memory (from analysis/input.csv)
2021-07-14T12:03:52.768425300Z > DATASETS CREATED:               none
2021-07-14T12:03:52.768498400Z > OTHER OUTPUT:                   logfiles, printed to folder analysis/$logdir
2021-07-14T12:03:52.768508000Z > 
2021-07-14T12:03:52.768513300Z > =============================================================================
2021-07-14T12:03:52.768518500Z > =*/
2021-07-14T12:03:52.768523100Z . global outdir     "output"
2021-07-14T12:03:52.768558300Z 
2021-07-14T12:03:52.768583600Z . global logdir     "log"
2021-07-14T12:03:52.768591100Z 
2021-07-14T12:03:52.768596300Z . global tempdir    "tempdata"
2021-07-14T12:03:52.768621700Z 
2021-07-14T12:03:52.768628800Z . 
2021-07-14T12:03:52.768633900Z . * Open a log file
2021-07-14T12:03:52.768637000Z . cap log close
2021-07-14T12:03:52.768639900Z 
2021-07-14T12:03:52.768642700Z . log using $logdir/WORMS_01_cr_analysis_dataset, replace t
2021-07-14T12:03:52.768646000Z (note: file /workspace/log/WORMS_01_cr_analysis_dataset.log not found)
2021-07-14T12:03:52.768689300Z -------------------------------------------------------------------------------
2021-07-14T12:03:52.768701700Z       name:  <unnamed>
2021-07-14T12:03:52.768707800Z        log:  /workspace/log/WORMS_01_cr_analysis_dataset.log
2021-07-14T12:03:52.768712900Z   log type:  text
2021-07-14T12:03:52.768716200Z  opened on:  14 Jul 2021, 12:03:52
2021-07-14T12:03:52.768719000Z 
2021-07-14T12:03:52.768721900Z . 
2021-07-14T12:03:52.768724800Z . /* CONVERT STRINGS TO DATE===================================================
2021-07-14T12:03:52.768727900Z > =*/
2021-07-14T12:03:52.768730800Z . /* Comorb dates dates are given with month only, so adding day
2021-07-14T12:03:52.768733700Z > 15 to enable  them to be processed as dates                                  
2021-07-14T12:03:52.768736700Z >                                                      */
2021-07-14T12:03:52.768739500Z . *Import dataset into STATA
2021-07-14T12:03:52.768742400Z . import delimited "output/input_worms.csv", clear
2021-07-14T12:03:54.122653600Z (50 vars, 30,000 obs)
2021-07-14T12:03:54.122674900Z 
2021-07-14T12:03:54.122679200Z . 
2021-07-14T12:03:54.122682600Z . *cr date for diabetes based on adjudicated type
2021-07-14T12:03:54.122686000Z . gen diabetes=type1_diabetes if diabetes_type=="T1DM"
2021-07-14T12:03:54.132594400Z (29,804 missing values generated)
2021-07-14T12:03:54.132613600Z 
2021-07-14T12:03:54.132629700Z . replace diabetes=type2_diabetes if diabetes_type=="T2DM"
2021-07-14T12:03:54.136802400Z (1,199 real changes made)
2021-07-14T12:03:54.136815600Z 
2021-07-14T12:03:54.136819700Z . replace diabetes=unknown_diabetes if diabetes_type=="UNKNOWN_DM"
2021-07-14T12:03:54.142242400Z (122 real changes made)
2021-07-14T12:03:54.142271500Z 
2021-07-14T12:03:54.142277300Z . 
2021-07-14T12:03:54.142281700Z . drop type1_diabetes type2_diabetes unknown_diabetes
2021-07-14T12:03:54.145980100Z 
2021-07-14T12:03:54.145997900Z . 
2021-07-14T12:03:54.146003300Z . foreach var of varlist  chronic_respiratory_disease ///
2021-07-14T12:03:54.146008200Z >                                                 chronic_cardiac_disease  ///
2021-07-14T12:03:54.146012700Z >                                                 diabetes  ///
2021-07-14T12:03:54.146017500Z >                                                 cancer_haem  ///
2021-07-14T12:03:54.146022100Z >                                                 cancer_nonhaem  ///
2021-07-14T12:03:54.146026000Z >                                                 permanent_immunodeficiency  /
2021-07-14T12:03:54.146030100Z > //
2021-07-14T12:03:54.146034100Z >                                                 temporary_immunodeficiency  /
2021-07-14T12:03:54.146038000Z > //
2021-07-14T12:03:54.146041700Z >                                                 dialysis                     
2021-07-14T12:03:54.146046000Z >                    ///
2021-07-14T12:03:54.146050400Z >                                                 kidney_transplant            
2021-07-14T12:03:54.146054600Z >            ///
2021-07-14T12:03:54.146058700Z >                                                 other_transplant             
2021-07-14T12:03:54.146063200Z >            ///
2021-07-14T12:03:54.146067300Z >                                                 asplenia                     
2021-07-14T12:03:54.146071900Z >    ///
2021-07-14T12:03:54.146076000Z >                                                 chronic_liver_disease  ///
2021-07-14T12:03:54.146084800Z >                                                 other_neuro  ///
2021-07-14T12:03:54.146090200Z >                                                 stroke_dementia              
2021-07-14T12:03:54.146094500Z >            ///
2021-07-14T12:03:54.146099200Z >                                                 esrf  ///
2021-07-14T12:03:54.146103700Z >                                                 hypertension  ///
2021-07-14T12:03:54.146107800Z >                                                 ra_sle_psoriasis  ///
2021-07-14T12:03:54.146112100Z >                                                 bmi_date_measured   ///
2021-07-14T12:03:54.146130400Z >                                                 bp_sys_date_measured   ///
2021-07-14T12:03:54.146135800Z >                                                 bp_dias_date_measured   ///
2021-07-14T12:03:54.146140300Z >                                                 creatinine_date  ///
2021-07-14T12:03:54.146144700Z >                                                 smoking_status_date ///
2021-07-14T12:03:54.146149300Z >                                                 dereg_date ///
2021-07-14T12:03:54.146153700Z >                                                 worms ///
2021-07-14T12:03:54.146158300Z >                                                 {
2021-07-14T12:03:54.146162400Z   2. 
2021-07-14T12:03:54.146243700Z .                 capture confirm string variable `var'
2021-07-14T12:03:54.146257200Z   3.                 if _rc!=0 {
2021-07-14T12:03:54.146262000Z   4.                         assert `var'==.
2021-07-14T12:03:54.146266200Z   5.                         rename `var' `var'_date
2021-07-14T12:03:54.146270100Z   6.                 }
2021-07-14T12:03:54.146273600Z   7. 
2021-07-14T12:03:54.146277100Z .                 else {
2021-07-14T12:03:54.146281200Z   8.                                 replace `var' = `var' + "-15"
2021-07-14T12:03:54.146285300Z   9.                                 rename `var' `var'_dstr
2021-07-14T12:03:54.146288800Z  10.                                 replace `var'_dstr = " " if `var'_dstr == 
2021-07-14T12:03:54.146292800Z > "-15"
2021-07-14T12:03:54.146296900Z  11.                                 gen `var'_date = date(`var'_dstr, "YMD")
2021-07-14T12:03:54.146301200Z  12.                                 order `var'_date, after(`var'_dstr)
2021-07-14T12:03:54.146305000Z  13.                                 drop `var'_dstr
2021-07-14T12:03:54.146352800Z  14.                 }
2021-07-14T12:03:54.146359100Z  15. 
2021-07-14T12:03:54.146362700Z .         format `var'_date %td
2021-07-14T12:03:54.146366200Z  16. }
2021-07-14T12:03:54.168100300Z variable chronic_respiratory_disease was str7 now str10
2021-07-14T12:03:54.168124700Z (30,000 real changes made)
2021-07-14T12:03:54.236921600Z (24,000 real changes made)
2021-07-14T12:03:54.236945200Z (24,000 missing values generated)
2021-07-14T12:03:54.256342300Z variable chronic_cardiac_disease was str7 now str10
2021-07-14T12:03:54.256362600Z (30,000 real changes made)
2021-07-14T12:03:54.303780400Z (24,000 real changes made)
2021-07-14T12:03:54.303801100Z (24,000 missing values generated)
2021-07-14T12:03:54.303806400Z variable diabetes was str7 now str10
2021-07-14T12:03:54.303810800Z (30,000 real changes made)
2021-07-14T12:03:54.346639900Z (28,483 real changes made)
2021-07-14T12:03:54.346664600Z (28,483 missing values generated)
2021-07-14T12:03:54.346684600Z variable cancer_haem was str7 now str10
2021-07-14T12:03:54.346689000Z (30,000 real changes made)
2021-07-14T12:03:54.397143200Z (24,000 real changes made)
2021-07-14T12:03:54.397160900Z (24,000 missing values generated)
2021-07-14T12:03:54.397166900Z variable cancer_nonhaem was str7 now str10
2021-07-14T12:03:54.397171200Z (30,000 real changes made)
2021-07-14T12:03:54.444666400Z (24,000 real changes made)
2021-07-14T12:03:54.444688100Z (24,000 missing values generated)
2021-07-14T12:03:54.444693600Z variable permanent_immunodeficiency was str7 now str10
2021-07-14T12:03:54.444698200Z (30,000 real changes made)
2021-07-14T12:03:54.487095700Z (24,000 real changes made)
2021-07-14T12:03:54.487160400Z (24,000 missing values generated)
2021-07-14T12:03:54.487171500Z variable temporary_immunodeficiency was str7 now str10
2021-07-14T12:03:54.487176800Z (30,000 real changes made)
2021-07-14T12:03:54.539005100Z (24,000 real changes made)
2021-07-14T12:03:54.539027200Z (24,000 missing values generated)
2021-07-14T12:03:54.539033700Z variable dialysis was str7 now str10
2021-07-14T12:03:54.539038700Z (30,000 real changes made)
2021-07-14T12:03:54.587947800Z (24,000 real changes made)
2021-07-14T12:03:54.587970800Z (24,000 missing values generated)
2021-07-14T12:03:54.587976800Z variable kidney_transplant was str7 now str10
2021-07-14T12:03:54.587980500Z (30,000 real changes made)
2021-07-14T12:03:54.626683300Z (24,000 real changes made)
2021-07-14T12:03:54.626703200Z (24,000 missing values generated)
2021-07-14T12:03:54.626707900Z variable other_transplant was str7 now str10
2021-07-14T12:03:54.626711800Z (30,000 real changes made)
2021-07-14T12:03:54.669756000Z (24,000 real changes made)
2021-07-14T12:03:54.669774900Z (24,000 missing values generated)
2021-07-14T12:03:54.669778800Z variable asplenia was str7 now str10
2021-07-14T12:03:54.669781400Z (30,000 real changes made)
2021-07-14T12:03:54.714519900Z (24,000 real changes made)
2021-07-14T12:03:54.714539700Z (24,000 missing values generated)
2021-07-14T12:03:54.714545000Z variable chronic_liver_disease was str7 now str10
2021-07-14T12:03:54.714549300Z (30,000 real changes made)
2021-07-14T12:03:54.749693600Z (24,000 real changes made)
2021-07-14T12:03:54.749732500Z (24,000 missing values generated)
2021-07-14T12:03:54.749738100Z variable other_neuro was str7 now str10
2021-07-14T12:03:54.749741300Z (30,000 real changes made)
2021-07-14T12:03:54.786611200Z (24,000 real changes made)
2021-07-14T12:03:54.786655200Z (24,000 missing values generated)
2021-07-14T12:03:54.786663000Z variable stroke_dementia was str7 now str10
2021-07-14T12:03:54.786667500Z (30,000 real changes made)
2021-07-14T12:03:54.830032300Z (24,000 real changes made)
2021-07-14T12:03:54.830056900Z (24,000 missing values generated)
2021-07-14T12:03:54.830062600Z variable esrf was str7 now str10
2021-07-14T12:03:54.830067100Z (30,000 real changes made)
2021-07-14T12:03:54.878476800Z (24,000 real changes made)
2021-07-14T12:03:54.878502400Z (24,000 missing values generated)
2021-07-14T12:03:54.878508700Z variable hypertension was str7 now str10
2021-07-14T12:03:54.878514200Z (30,000 real changes made)
2021-07-14T12:03:54.918959600Z (24,000 real changes made)
2021-07-14T12:03:54.918975700Z (24,000 missing values generated)
2021-07-14T12:03:54.918979700Z variable ra_sle_psoriasis was str7 now str10
2021-07-14T12:03:54.918982700Z (30,000 real changes made)
2021-07-14T12:03:54.971138500Z (24,000 real changes made)
2021-07-14T12:03:54.971159900Z (24,000 missing values generated)
2021-07-14T12:03:54.971165600Z variable bmi_date_measured was str7 now str10
2021-07-14T12:03:54.971169800Z (30,000 real changes made)
2021-07-14T12:03:55.033604000Z (1,500 real changes made)
2021-07-14T12:03:55.033628500Z (1,500 missing values generated)
2021-07-14T12:03:55.033636000Z variable bp_sys_date_measured was str7 now str10
2021-07-14T12:03:55.033641600Z (30,000 real changes made)
2021-07-14T12:03:55.094375500Z (1,500 real changes made)
2021-07-14T12:03:55.094400500Z (1,500 missing values generated)
2021-07-14T12:03:55.094410500Z variable bp_dias_date_measured was str7 now str10
2021-07-14T12:03:55.094415500Z (30,000 real changes made)
2021-07-14T12:03:55.142646100Z (1,500 real changes made)
2021-07-14T12:03:55.142666000Z (1,500 missing values generated)
2021-07-14T12:03:55.142670000Z variable creatinine_date was str7 now str10
2021-07-14T12:03:55.142673300Z (30,000 real changes made)
2021-07-14T12:03:55.182153700Z (1,500 real changes made)
2021-07-14T12:03:55.182174500Z (1,500 missing values generated)
2021-07-14T12:03:55.182181100Z variable smoking_status_date was str7 now str10
2021-07-14T12:03:55.182186500Z (30,000 real changes made)
2021-07-14T12:03:55.215358300Z (24,275 real changes made)
2021-07-14T12:03:55.215376700Z (24,275 missing values generated)
2021-07-14T12:03:55.215381000Z variable dereg_date was str7 now str10
2021-07-14T12:03:55.215384500Z (30,000 real changes made)
2021-07-14T12:03:55.242864400Z (29,838 real changes made)
2021-07-14T12:03:55.242883700Z (29,838 missing values generated)
2021-07-14T12:03:55.242898400Z variable worms was str7 now str10
2021-07-14T12:03:55.242901400Z (30,000 real changes made)
2021-07-14T12:03:55.260049700Z (24,000 real changes made)
2021-07-14T12:03:55.260068600Z (24,000 missing values generated)
2021-07-14T12:03:55.260072800Z 
2021-07-14T12:03:55.260075400Z . 
2021-07-14T12:03:55.260078100Z . * Recode to dates from the strings
2021-07-14T12:03:55.260080900Z . foreach var of varlist  died_date_ons                           {
2021-07-14T12:03:55.260083800Z   2. 
2021-07-14T12:03:55.260087000Z .         confirm string variable `var'
2021-07-14T12:03:55.260089900Z   3.         rename `var' `var'_dstr
2021-07-14T12:03:55.260092700Z   4.         gen `var' = date(`var'_dstr, "YMD")
2021-07-14T12:03:55.260095500Z   5.         drop `var'_dstr
2021-07-14T12:03:55.260098100Z   6.         format `var' %td
2021-07-14T12:03:55.260100600Z   7. 
2021-07-14T12:03:55.260103100Z . }
2021-07-14T12:03:55.269675100Z (24,116 missing values generated)
2021-07-14T12:03:55.269705500Z 
2021-07-14T12:03:55.269712800Z . 
2021-07-14T12:03:55.269717200Z . /*Tab all variables in initial extract*/
2021-07-14T12:03:55.269721500Z . sum, d f
2021-07-14T12:03:55.271754800Z 
2021-07-14T12:03:55.271769700Z                        dereg_date_date
2021-07-14T12:03:55.271773300Z -------------------------------------------------------------
2021-07-14T12:03:55.271776200Z       Percentiles      Smallest
2021-07-14T12:03:55.271778800Z  1%    15feb2020      15feb2020
2021-07-14T12:03:55.271781500Z  5%    15feb2020      15feb2020
2021-07-14T12:03:55.271798300Z 10%    15apr2020      15feb2020       Obs                 162
2021-07-14T12:03:55.271800800Z 25%    15jun2020      15feb2020       Sum of Wgt.         162
2021-07-14T12:03:55.271803000Z 
2021-07-14T12:03:55.271805200Z 50%    15oct2020                      Mean          25oct2020
2021-07-14T12:03:55.271826300Z                         Largest       Std. Dev.      150.1986
2021-07-14T12:03:55.271828900Z 75%    15mar2021      15jul2021
2021-07-14T12:03:55.275908700Z 90%    15may2021      15jul2021       Variance       22559.62
2021-07-14T12:03:55.275922200Z 95%    15jun2021      15jul2021       Skewness       .0760809
2021-07-14T12:03:55.275925800Z 99%    15jul2021      15jul2021       Kurtosis       1.837335
2021-07-14T12:03:55.275928700Z 
2021-07-14T12:03:55.275931300Z                          worms_date
2021-07-14T12:03:55.275934000Z -------------------------------------------------------------
2021-07-14T12:03:55.275936900Z       Percentiles      Smallest
2021-07-14T12:03:55.275962700Z  1%    15feb2019      15feb2019
2021-07-14T12:03:55.275984900Z  5%    15mar2019      15feb2019
2021-07-14T12:03:55.275987400Z 10%    15apr2019      15feb2019       Obs               6,000
2021-07-14T12:03:55.275990100Z 25%    15sep2019      15feb2019       Sum of Wgt.       6,000
2021-07-14T12:03:55.275992800Z 
2021-07-14T12:03:55.289984400Z 50%    15apr2020                      Mean          23apr2020
2021-07-14T12:03:55.290022200Z                         Largest       Std. Dev.      260.3037
2021-07-14T12:03:55.290025900Z 75%    15dec2020      15jul2021
2021-07-14T12:03:55.290028700Z 90%    15apr2021      15jul2021       Variance       67758.01
2021-07-14T12:03:55.290031300Z 95%    15jun2021      15jul2021       Skewness       .0106544
2021-07-14T12:03:55.290034100Z 99%    15jul2021      15jul2021       Kurtosis       1.789319
2021-07-14T12:03:55.290049100Z 
2021-07-14T12:03:55.290055400Z                        ethnicity_date
2021-07-14T12:03:55.290058500Z -------------------------------------------------------------
2021-07-14T12:03:55.290061100Z       Percentiles      Smallest
2021-07-14T12:03:55.290063600Z  1%         1970           1970
2021-07-14T12:03:55.291672400Z  5%         1972           1970
2021-07-14T12:03:55.291686500Z 10%         1975           1970       Obs              22,500
2021-07-14T12:03:55.291691200Z 25%         1983           1970       Sum of Wgt.      22,500
2021-07-14T12:03:55.291695700Z 
2021-07-14T12:03:55.291699600Z 50%         1995                      Mean           1995.362
2021-07-14T12:03:55.291703500Z                         Largest       Std. Dev.      14.82401
2021-07-14T12:03:55.291707500Z 75%         2008           2021
2021-07-14T12:03:55.291711900Z 90%         2016           2021       Variance       219.7512
2021-07-14T12:03:55.291716000Z 95%         2018           2021       Skewness        -.01057
2021-07-14T12:03:55.291720400Z 99%         2021           2021       Kurtosis       1.817737
2021-07-14T12:03:55.291724600Z 
2021-07-14T12:03:55.317024000Z                    bmi_date_measured_date
2021-07-14T12:03:55.317096800Z -------------------------------------------------------------
2021-07-14T12:03:55.317105600Z       Percentiles      Smallest
2021-07-14T12:03:55.317110800Z  1%    15jul1970      15jan1970
2021-07-14T12:03:55.317114700Z  5%    15aug1972      15jan1970
2021-07-14T12:03:55.317119000Z 10%    15apr1975      15jan1970       Obs              28,500
2021-07-14T12:03:55.317124500Z 25%    15jan1983      15jan1970       Sum of Wgt.      28,500
2021-07-14T12:03:55.317128200Z 
2021-07-14T12:03:55.317132500Z 50%    15oct1995                      Mean          23oct1995
2021-07-14T12:03:55.317136500Z                         Largest       Std. Dev.      5418.223
2021-07-14T12:03:55.317172600Z 75%    15aug2008      15jul2021
2021-07-14T12:03:55.336869500Z 90%    15apr2016      15jul2021       Variance       2.94e+07
2021-07-14T12:03:55.336902900Z 95%    15dec2018      15jul2021       Skewness       -.003613
2021-07-14T12:03:55.336907000Z 99%    15dec2020      15jul2021       Kurtosis        1.80081
2021-07-14T12:03:55.336909900Z 
2021-07-14T12:03:55.336912500Z                   bp_sys_date_measured_date
2021-07-14T12:03:55.336915100Z -------------------------------------------------------------
2021-07-14T12:03:55.336917900Z       Percentiles      Smallest
2021-07-14T12:03:55.336920600Z  1%    15jul1970      15jan1970
2021-07-14T12:03:55.336923300Z  5%    15jun1972      15jan1970
2021-07-14T12:03:55.336925800Z 10%    15nov1974      15jan1970       Obs              28,500
2021-07-14T12:03:55.336928500Z 25%    15apr1982      15jan1970       Sum of Wgt.      28,500
2021-07-14T12:03:55.336931200Z 
2021-07-14T12:03:55.354688700Z 50%    15jul1994                      Mean          09jul1994
2021-07-14T12:03:55.354721500Z                         Largest       Std. Dev.      5175.633
2021-07-14T12:03:55.354725700Z 75%    15oct2006      15jan2019
2021-07-14T12:03:55.354728700Z 90%    15feb2014      15jan2019       Variance       2.68e+07
2021-07-14T12:03:55.354731900Z 95%    15aug2016      15jan2019       Skewness       -.000407
2021-07-14T12:03:55.354734700Z 99%    15aug2018      15jan2019       Kurtosis       1.799697
2021-07-14T12:03:55.354737500Z 
2021-07-14T12:03:55.354740200Z                  bp_dias_date_measured_date
2021-07-14T12:03:55.354743000Z -------------------------------------------------------------
2021-07-14T12:03:55.354745900Z       Percentiles      Smallest
2021-07-14T12:03:55.354748600Z  1%    15jun1970      15jan1970
2021-07-14T12:03:55.354751200Z  5%    15may1972      15jan1970
2021-07-14T12:03:55.354753800Z 10%    15nov1974      15jan1970       Obs              28,500
2021-07-14T12:03:55.354756600Z 25%    15mar1982      15jan1970       Sum of Wgt.      28,500
2021-07-14T12:03:55.354773300Z 
2021-07-14T12:03:55.354775600Z 50%    15jul1994                      Mean          18jun1994
2021-07-14T12:03:55.354778100Z                         Largest       Std. Dev.       5173.01
2021-07-14T12:03:55.354780700Z 75%    15aug2006      15jan2019
2021-07-14T12:03:55.354783100Z 90%    15mar2014      15jan2019       Variance       2.68e+07
2021-07-14T12:03:55.354785600Z 95%    15aug2016      15jan2019       Skewness       .0038777
2021-07-14T12:03:55.366572900Z 99%    15jul2018      15jan2019       Kurtosis       1.809358
2021-07-14T12:03:55.366597600Z 
2021-07-14T12:03:55.366602800Z                     creatinine_date_date
2021-07-14T12:03:55.366623800Z -------------------------------------------------------------
2021-07-14T12:03:55.366628900Z       Percentiles      Smallest
2021-07-14T12:03:55.366633500Z  1%    15mar2018      15mar2018
2021-07-14T12:03:55.366637600Z  5%    15mar2018      15mar2018
2021-07-14T12:03:55.366641500Z 10%    15apr2018      15mar2018       Obs              28,500
2021-07-14T12:03:55.366645900Z 25%    15may2018      15mar2018       Sum of Wgt.      28,500
2021-07-14T12:03:55.366649500Z 
2021-07-14T12:03:55.366653300Z 50%    15aug2018                      Mean          15aug2018
2021-07-14T12:03:55.366657100Z                         Largest       Std. Dev.      97.10864
2021-07-14T12:03:55.366660900Z 75%    15nov2018      15jan2019
2021-07-14T12:03:55.371564700Z 90%    15dec2018      15jan2019       Variance       9430.088
2021-07-14T12:03:55.371594800Z 95%    15jan2019      15jan2019       Skewness      -.0059524
2021-07-14T12:03:55.371603300Z 99%    15jan2019      15jan2019       Kurtosis        1.77919
2021-07-14T12:03:55.371606900Z 
2021-07-14T12:03:55.371609600Z                   smoking_status_date_date
2021-07-14T12:03:55.371612400Z -------------------------------------------------------------
2021-07-14T12:03:55.371687300Z       Percentiles      Smallest
2021-07-14T12:03:55.371697100Z  1%    15aug1970      15jan1970
2021-07-14T12:03:55.371700200Z  5%    15jul1972      15jan1970
2021-07-14T12:03:55.371703000Z 10%    15apr1975      15jan1970       Obs               5,725
2021-07-14T12:03:55.377002900Z 25%    15aug1982      15jan1970       Sum of Wgt.       5,725
2021-07-14T12:03:55.377030600Z 
2021-07-14T12:03:55.377068400Z 50%    15jan1995                      Mean          19nov1994
2021-07-14T12:03:55.377072800Z                         Largest       Std. Dev.      5147.237
2021-07-14T12:03:55.377075700Z 75%    15dec2006      15jan2019
2021-07-14T12:03:55.377098600Z 90%    15jul2014      15jan2019       Variance       2.65e+07
2021-07-14T12:03:55.377119700Z 95%    15sep2016      15jan2019       Skewness      -.0205408
2021-07-14T12:03:55.377121900Z 99%    15aug2018      15jan2019       Kurtosis       1.820056
2021-07-14T12:03:55.377124200Z 
2021-07-14T12:03:55.377126400Z               chronic_respiratory_disease_date
2021-07-14T12:03:55.377128600Z -------------------------------------------------------------
2021-07-14T12:03:55.377130900Z       Percentiles      Smallest
2021-07-14T12:03:55.377133200Z  1%    30aug1970      15jan1970
2021-07-14T12:03:55.377135200Z  5%    15feb1973      15jan1970
2021-07-14T12:03:55.377137300Z 10%    15sep1975      15jan1970       Obs               6,000
2021-07-14T12:03:55.377139500Z 25%    15jan1983      15jan1970       Sum of Wgt.       6,000
2021-07-14T12:03:55.377149000Z 
2021-07-14T12:03:55.377151300Z 50%    15dec1994                      Mean          22dec1994
2021-07-14T12:03:55.377153600Z                         Largest       Std. Dev.      5105.036
2021-07-14T12:03:55.377155900Z 75%    15jan2007      15jan2019
2021-07-14T12:03:55.377158100Z 90%    15jul2014      15jan2019       Variance       2.61e+07
2021-07-14T12:03:55.377160300Z 95%    15aug2016      15jan2019       Skewness      -.0132081
2021-07-14T12:03:55.382448100Z 99%    15aug2018      15jan2019       Kurtosis       1.812879
2021-07-14T12:03:55.382465700Z 
2021-07-14T12:03:55.382470300Z                 chronic_cardiac_disease_date
2021-07-14T12:03:55.382474100Z -------------------------------------------------------------
2021-07-14T12:03:55.382477500Z       Percentiles      Smallest
2021-07-14T12:03:55.382481100Z  1%    30may1970      15jan1970
2021-07-14T12:03:55.382485200Z  5%    15may1972      15jan1970
2021-07-14T12:03:55.382489100Z 10%    15aug1974      15jan1970       Obs               6,000
2021-07-14T12:03:55.382512100Z 25%    15oct1981      15jan1970       Sum of Wgt.       6,000
2021-07-14T12:03:55.382517000Z 
2021-07-14T12:03:55.382520600Z 50%    15apr1994                      Mean          21mar1994
2021-07-14T12:03:55.382524300Z                         Largest       Std. Dev.      5197.282
2021-07-14T12:03:55.382528200Z 75%    15may2006      15jan2019
2021-07-14T12:03:55.384015200Z 90%    15feb2014      15jan2019       Variance       2.70e+07
2021-07-14T12:03:55.384027300Z 95%    15aug2016      15jan2019       Skewness       .0258274
2021-07-14T12:03:55.384030700Z 99%    15jul2018      15jan2019       Kurtosis       1.793073
2021-07-14T12:03:55.384033600Z 
2021-07-14T12:03:55.384036000Z                    hba1c_mmol_per_mol_date
2021-07-14T12:03:55.384038600Z -------------------------------------------------------------
2021-07-14T12:03:55.384041400Z no observations
2021-07-14T12:03:55.384043800Z 
2021-07-14T12:03:55.384046300Z                     hba1c_percentage_date
2021-07-14T12:03:55.384048800Z -------------------------------------------------------------
2021-07-14T12:03:55.384051400Z no observations
2021-07-14T12:03:55.384053800Z 
2021-07-14T12:03:55.384056200Z                       cancer_haem_date
2021-07-14T12:03:55.388315700Z -------------------------------------------------------------
2021-07-14T12:03:55.388328500Z       Percentiles      Smallest
2021-07-14T12:03:55.388346100Z  1%    15jun1970      15jan1970
2021-07-14T12:03:55.388353000Z  5%    15may1972      15jan1970
2021-07-14T12:03:55.388356200Z 10%    15sep1974      15jan1970       Obs               6,000
2021-07-14T12:03:55.388358900Z 25%    15apr1982      15jan1970       Sum of Wgt.       6,000
2021-07-14T12:03:55.388371200Z 
2021-07-14T12:03:55.388373900Z 50%    15may1994                      Mean          17jul1994
2021-07-14T12:03:55.388376400Z                         Largest       Std. Dev.      5205.058
2021-07-14T12:03:55.388379200Z 75%    15dec2006      15jan2019
2021-07-14T12:03:55.388381700Z 90%    15apr2014      15jan2019       Variance       2.71e+07
2021-07-14T12:03:55.393592100Z 95%    15jul2016      15jan2019       Skewness      -.0054967
2021-07-14T12:03:55.393606900Z 99%    15aug2018      15jan2019       Kurtosis       1.785395
2021-07-14T12:03:55.393627800Z 
2021-07-14T12:03:55.393631400Z                      cancer_nonhaem_date
2021-07-14T12:03:55.393634100Z -------------------------------------------------------------
2021-07-14T12:03:55.393636800Z       Percentiles      Smallest
2021-07-14T12:03:55.393639300Z  1%    15jun1970      15jan1970
2021-07-14T12:03:55.393641800Z  5%    15jul1972      15jan1970
2021-07-14T12:03:55.393644300Z 10%    15jan1975      15jan1970       Obs               6,000
2021-07-14T12:03:55.393647400Z 25%    15apr1982      15jan1970       Sum of Wgt.       6,000
2021-07-14T12:03:55.393650100Z 
2021-07-14T12:03:55.393652500Z 50%    15may1994                      Mean          06aug1994
2021-07-14T12:03:55.398681800Z                         Largest       Std. Dev.      5178.228
2021-07-14T12:03:55.398708100Z 75%    15oct2006      15jan2019
2021-07-14T12:03:55.398717500Z 90%    15sep2014      15jan2019       Variance       2.68e+07
2021-07-14T12:03:55.398722600Z 95%    15nov2016      15jan2019       Skewness          .0141
2021-07-14T12:03:55.398726600Z 99%    15sep2018      15jan2019       Kurtosis       1.814362
2021-07-14T12:03:55.398730600Z 
2021-07-14T12:03:55.398734000Z                permanent_immunodeficiency_date
2021-07-14T12:03:55.398738700Z -------------------------------------------------------------
2021-07-14T12:03:55.398743100Z       Percentiles      Smallest
2021-07-14T12:03:55.398746600Z  1%    15jun1970      15jan1970
2021-07-14T12:03:55.398749200Z  5%    15may1972      15jan1970
2021-07-14T12:03:55.399958000Z 10%    15nov1974      15jan1970       Obs               6,000
2021-07-14T12:03:55.399972600Z 25%    15apr1982      15jan1970       Sum of Wgt.       6,000
2021-07-14T12:03:55.399978400Z 
2021-07-14T12:03:55.399982700Z 50%    15mar1995                      Mean          23sep1994
2021-07-14T12:03:55.399986600Z                         Largest       Std. Dev.      5220.126
2021-07-14T12:03:55.399990600Z 75%    15mar2007      15jan2019
2021-07-14T12:03:55.399995000Z 90%    15jun2014      15jan2019       Variance       2.72e+07
2021-07-14T12:03:55.400014600Z 95%    15nov2016      15jan2019       Skewness       -.018598
2021-07-14T12:03:55.400028800Z 99%    15aug2018      15jan2019       Kurtosis       1.787955
2021-07-14T12:03:55.400031200Z 
2021-07-14T12:03:55.400033300Z                         asplenia_date
2021-07-14T12:03:55.404801800Z -------------------------------------------------------------
2021-07-14T12:03:55.404817400Z       Percentiles      Smallest
2021-07-14T12:03:55.404820900Z  1%    15jun1970      15jan1970
2021-07-14T12:03:55.404823600Z  5%    15may1972      15jan1970
2021-07-14T12:03:55.404826400Z 10%    15sep1974      15jan1970       Obs               6,000
2021-07-14T12:03:55.404829000Z 25%    15nov1981      15jan1970       Sum of Wgt.       6,000
2021-07-14T12:03:55.404832000Z 
2021-07-14T12:03:55.404834500Z 50%    15may1994                      Mean          13may1994
2021-07-14T12:03:55.404837200Z                         Largest       Std. Dev.      5201.742
2021-07-14T12:03:55.404840000Z 75%    15oct2006      15jan2019
2021-07-14T12:03:55.404842600Z 90%    15jan2014      15jan2019       Variance       2.71e+07
2021-07-14T12:03:55.408396900Z 95%    15jul2016      15jan2019       Skewness       .0058714
2021-07-14T12:03:55.408410700Z 99%    15aug2018      15jan2019       Kurtosis       1.781353
2021-07-14T12:03:55.408414500Z 
2021-07-14T12:03:55.408417300Z                temporary_immunodeficiency_date
2021-07-14T12:03:55.408420000Z -------------------------------------------------------------
2021-07-14T12:03:55.408422800Z       Percentiles      Smallest
2021-07-14T12:03:55.408425600Z  1%    15mar2018      15mar2018
2021-07-14T12:03:55.408428300Z  5%    15mar2018      15mar2018
2021-07-14T12:03:55.408430900Z 10%    15apr2018      15mar2018       Obs               6,000
2021-07-14T12:03:55.408433600Z 25%    15may2018      15mar2018       Sum of Wgt.       6,000
2021-07-14T12:03:55.408436200Z 
2021-07-14T12:03:55.408438700Z 50%    15aug2018                      Mean          16aug2018
2021-07-14T12:03:55.412650600Z                         Largest       Std. Dev.      97.42306
2021-07-14T12:03:55.412666000Z 75%    15nov2018      15jan2019
2021-07-14T12:03:55.412669800Z 90%    15dec2018      15jan2019       Variance       9491.252
2021-07-14T12:03:55.412672900Z 95%    15jan2019      15jan2019       Skewness      -.0212465
2021-07-14T12:03:55.412675700Z 99%    15jan2019      15jan2019       Kurtosis       1.751855
2021-07-14T12:03:55.412678500Z 
2021-07-14T12:03:55.412681300Z                  chronic_liver_disease_date
2021-07-14T12:03:55.412684000Z -------------------------------------------------------------
2021-07-14T12:03:55.412686800Z       Percentiles      Smallest
2021-07-14T12:03:55.412689600Z  1%    15jun1970      15jan1970
2021-07-14T12:03:55.412692300Z  5%    15jun1972      15jan1970
2021-07-14T12:03:55.413579800Z 10%    30jan1975      15jan1970       Obs               6,000
2021-07-14T12:03:55.413604800Z 25%    15apr1982      15jan1970       Sum of Wgt.       6,000
2021-07-14T12:03:55.413609100Z 
2021-07-14T12:03:55.413612000Z 50%    15jan1994                      Mean          24may1994
2021-07-14T12:03:55.413614900Z                         Largest       Std. Dev.      5152.824
2021-07-14T12:03:55.413618300Z 75%    15jul2006      15jan2019
2021-07-14T12:03:55.413621200Z 90%    15mar2014      15jan2019       Variance       2.66e+07
2021-07-14T12:03:55.413624100Z 95%    15jul2016      15jan2019       Skewness       .0268961
2021-07-14T12:03:55.413626900Z 99%    15jul2018      15jan2019       Kurtosis       1.809948
2021-07-14T12:03:55.413629800Z 
2021-07-14T12:03:55.413632400Z                     stroke_dementia_date
2021-07-14T12:03:55.417539100Z -------------------------------------------------------------
2021-07-14T12:03:55.417553300Z       Percentiles      Smallest
2021-07-14T12:03:55.417557100Z  1%    15jul1970      15jan1970
2021-07-14T12:03:55.417559900Z  5%    15may1972      15jan1970
2021-07-14T12:03:55.417562700Z 10%    15dec1974      15jan1970       Obs               6,000
2021-07-14T12:03:55.417565500Z 25%    15may1982      15jan1970       Sum of Wgt.       6,000
2021-07-14T12:03:55.417568600Z 
2021-07-14T12:03:55.417571200Z 50%    15nov1994                      Mean          22sep1994
2021-07-14T12:03:55.417574000Z                         Largest       Std. Dev.      5194.527
2021-07-14T12:03:55.417576900Z 75%    30mar2007      15jan2019
2021-07-14T12:03:55.417579600Z 90%    15may2014      15jan2019       Variance       2.70e+07
2021-07-14T12:03:55.422187100Z 95%    15sep2016      15jan2019       Skewness      -.0134075
2021-07-14T12:03:55.422202600Z 99%    15aug2018      15jan2019       Kurtosis       1.790764
2021-07-14T12:03:55.422208200Z 
2021-07-14T12:03:55.422212800Z                       other_neuro_date
2021-07-14T12:03:55.422217200Z -------------------------------------------------------------
2021-07-14T12:03:55.422222100Z       Percentiles      Smallest
2021-07-14T12:03:55.422226600Z  1%    15jun1970      15jan1970
2021-07-14T12:03:55.422231300Z  5%    15may1972      15jan1970
2021-07-14T12:03:55.422235900Z 10%    15oct1974      15jan1970       Obs               6,000
2021-07-14T12:03:55.422240500Z 25%    15dec1981      15jan1970       Sum of Wgt.       6,000
2021-07-14T12:03:55.422245100Z 
2021-07-14T12:03:55.422249100Z 50%    30mar1994                      Mean          11apr1994
2021-07-14T12:03:55.426778900Z                         Largest       Std. Dev.      5146.345
2021-07-14T12:03:55.426806900Z 75%    15apr2006      15jan2019
2021-07-14T12:03:55.426826800Z 90%    15feb2014      15jan2019       Variance       2.65e+07
2021-07-14T12:03:55.426832600Z 95%    15aug2016      15jan2019       Skewness       .0217013
2021-07-14T12:03:55.426837300Z 99%    15jul2018      15jan2019       Kurtosis         1.8248
2021-07-14T12:03:55.426842000Z 
2021-07-14T12:03:55.426846500Z                           esrf_date
2021-07-14T12:03:55.426850700Z -------------------------------------------------------------
2021-07-14T12:03:55.426855000Z       Percentiles      Smallest
2021-07-14T12:03:55.426859200Z  1%    15jul1970      15jan1970
2021-07-14T12:03:55.426878200Z  5%    15jun1972      15jan1970
2021-07-14T12:03:55.427792900Z 10%    15jan1975      15jan1970       Obs               6,000
2021-07-14T12:03:55.427805500Z 25%    15jun1982      15jan1970       Sum of Wgt.       6,000
2021-07-14T12:03:55.427809100Z 
2021-07-14T12:03:55.427811800Z 50%    15aug1994                      Mean          14sep1994
2021-07-14T12:03:55.427814500Z                         Largest       Std. Dev.       5168.84
2021-07-14T12:03:55.427817300Z 75%    15feb2007      15jan2019
2021-07-14T12:03:55.427820000Z 90%    15feb2014      15jan2019       Variance       2.67e+07
2021-07-14T12:03:55.427822800Z 95%    15jul2016      15jan2019       Skewness      -.0203247
2021-07-14T12:03:55.427825500Z 99%    15jul2018      15jan2019       Kurtosis        1.80292
2021-07-14T12:03:55.427828100Z 
2021-07-14T12:03:55.427830600Z                         dialysis_date
2021-07-14T12:03:55.431587000Z -------------------------------------------------------------
2021-07-14T12:03:55.431598900Z       Percentiles      Smallest
2021-07-14T12:03:55.431602400Z  1%    15jul1970      15jan1970
2021-07-14T12:03:55.431604900Z  5%    15jul1972      15jan1970
2021-07-14T12:03:55.431607400Z 10%    15apr1975      15jan1970       Obs               6,000
2021-07-14T12:03:55.431609900Z 25%    15jan1983      15jan1970       Sum of Wgt.       6,000
2021-07-14T12:03:55.431612600Z 
2021-07-14T12:03:55.431664400Z 50%    15aug1995                      Mean          06jun1995
2021-07-14T12:03:55.431689200Z                         Largest       Std. Dev.      5294.833
2021-07-14T12:03:55.431691900Z 75%    15jan2008      15jan2020
2021-07-14T12:03:55.431694200Z 90%    15may2015      15jan2020       Variance       2.80e+07
2021-07-14T12:03:55.436437000Z 95%    15oct2017      15jan2020       Skewness      -.0303948
2021-07-14T12:03:55.436454200Z 99%    30aug2019      15jan2020       Kurtosis       1.797888
2021-07-14T12:03:55.436460100Z 
2021-07-14T12:03:55.436464400Z                    kidney_transplant_date
2021-07-14T12:03:55.436468400Z -------------------------------------------------------------
2021-07-14T12:03:55.436483800Z       Percentiles      Smallest
2021-07-14T12:03:55.436488700Z  1%    15jul1970      15jan1970
2021-07-14T12:03:55.436492800Z  5%    15aug1972      15jan1970
2021-07-14T12:03:55.436511500Z 10%    15mar1975      15jan1970       Obs               6,000
2021-07-14T12:03:55.436515300Z 25%    15apr1982      15jan1970       Sum of Wgt.       6,000
2021-07-14T12:03:55.436518000Z 
2021-07-14T12:03:55.436520100Z 50%    15oct1994                      Mean          22nov1994
2021-07-14T12:03:55.440776100Z                         Largest       Std. Dev.      5277.742
2021-07-14T12:03:55.440789200Z 75%    15aug2007      15jan2020
2021-07-14T12:03:55.440792800Z 90%    15jan2015      15jan2020       Variance       2.79e+07
2021-07-14T12:03:55.440795500Z 95%    15jul2017      15jan2020       Skewness       .0254212
2021-07-14T12:03:55.440798100Z 99%    30jul2019      15jan2020       Kurtosis       1.787474
2021-07-14T12:03:55.440800700Z 
2021-07-14T12:03:55.440803300Z                     other_transplant_date
2021-07-14T12:03:55.440805900Z -------------------------------------------------------------
2021-07-14T12:03:55.440808400Z       Percentiles      Smallest
2021-07-14T12:03:55.440810900Z  1%    30jul1970      15jan1970
2021-07-14T12:03:55.440813300Z  5%    15jul1972      15jan1970
2021-07-14T12:03:55.441844500Z 10%    15aug1974      15jan1970       Obs               6,000
2021-07-14T12:03:55.441857700Z 25%    15mar1982      15jan1970       Sum of Wgt.       6,000
2021-07-14T12:03:55.441861600Z 
2021-07-14T12:03:55.441865300Z 50%    15dec1994                      Mean          22dec1994
2021-07-14T12:03:55.441869300Z                         Largest       Std. Dev.      5324.952
2021-07-14T12:03:55.441873300Z 75%    15sep2007      15jan2020
2021-07-14T12:03:55.441877300Z 90%    15apr2015      15jan2020       Variance       2.84e+07
2021-07-14T12:03:55.441896000Z 95%    15aug2017      15jan2020       Skewness       .0023538
2021-07-14T12:03:55.441905000Z 99%    15jul2019      15jan2020       Kurtosis        1.78268
2021-07-14T12:03:55.441910200Z 
2021-07-14T12:03:55.441914400Z                       hypertension_date
2021-07-14T12:03:55.445612000Z -------------------------------------------------------------
2021-07-14T12:03:55.445625000Z       Percentiles      Smallest
2021-07-14T12:03:55.445630300Z  1%    15aug1970      15jan1970
2021-07-14T12:03:55.445633300Z  5%    15sep1972      15jan1970
2021-07-14T12:03:55.445635400Z 10%    15mar1975      15jan1970       Obs               6,000
2021-07-14T12:03:55.445637700Z 25%    15jul1982      15jan1970       Sum of Wgt.       6,000
2021-07-14T12:03:55.445659700Z 
2021-07-14T12:03:55.445662200Z 50%    15dec1994                      Mean          23jul1995
2021-07-14T12:03:55.445687800Z                         Largest       Std. Dev.      5449.609
2021-07-14T12:03:55.445690300Z 75%    15aug2008      15jul2021
2021-07-14T12:03:55.445692400Z 90%    15may2016      15jul2021       Variance       2.97e+07
2021-07-14T12:03:55.450264800Z 95%    30jan2019      15jul2021       Skewness       .0404068
2021-07-14T12:03:55.450280900Z 99%    15jan2021      15jul2021       Kurtosis       1.788636
2021-07-14T12:03:55.450284600Z 
2021-07-14T12:03:55.450287300Z                     ra_sle_psoriasis_date
2021-07-14T12:03:55.450290000Z -------------------------------------------------------------
2021-07-14T12:03:55.450309100Z       Percentiles      Smallest
2021-07-14T12:03:55.450313000Z  1%    15jul1970      15jan1970
2021-07-14T12:03:55.450315700Z  5%    30aug1972      15jan1970
2021-07-14T12:03:55.450318400Z 10%    15jan1975      15jan1970       Obs               6,000
2021-07-14T12:03:55.450321000Z 25%    30may1982      15jan1970       Sum of Wgt.       6,000
2021-07-14T12:03:55.450323700Z 
2021-07-14T12:03:55.450326300Z 50%    15nov1994                      Mean          23oct1994
2021-07-14T12:03:55.464199200Z                         Largest       Std. Dev.      5182.556
2021-07-14T12:03:55.464232900Z 75%    15mar2007      15jan2019
2021-07-14T12:03:55.464238200Z 90%    15apr2014      15jan2019       Variance       2.69e+07
2021-07-14T12:03:55.464242300Z 95%    15oct2016      15jan2019       Skewness      -.0142753
2021-07-14T12:03:55.464246100Z 99%    15aug2018      15jan2019       Kurtosis       1.782819
2021-07-14T12:03:55.464250800Z 
2021-07-14T12:03:55.464254800Z                              age
2021-07-14T12:03:55.464259400Z -------------------------------------------------------------
2021-07-14T12:03:55.464264300Z       Percentiles      Smallest
2021-07-14T12:03:55.464268100Z  1%            0              0
2021-07-14T12:03:55.464287700Z  5%            4              0
2021-07-14T12:03:55.464296600Z 10%            8              0       Obs              30,000
2021-07-14T12:03:55.464302200Z 25%           21              0       Sum of Wgt.      30,000
2021-07-14T12:03:55.464306800Z 
2021-07-14T12:03:55.464311400Z 50%           40                      Mean           40.45693
2021-07-14T12:03:55.464316000Z                         Largest       Std. Dev.      23.78346
2021-07-14T12:03:55.464320400Z 75%           59            102
2021-07-14T12:03:55.464324700Z 90%           73            103       Variance       565.6528
2021-07-14T12:03:55.464328400Z 95%           80            104       Skewness       .1226442
2021-07-14T12:03:55.464332200Z 99%           89            106       Kurtosis        2.03544
2021-07-14T12:03:55.464336300Z 
2021-07-14T12:03:55.464340700Z                              sex
2021-07-14T12:03:55.474678900Z -------------------------------------------------------------
2021-07-14T12:03:55.474699200Z no observations
2021-07-14T12:03:55.474702700Z 
2021-07-14T12:03:55.474705300Z                              imd
2021-07-14T12:03:55.474708000Z -------------------------------------------------------------
2021-07-14T12:03:55.474711000Z       Percentiles      Smallest
2021-07-14T12:03:55.474713600Z  1%          100            100
2021-07-14T12:03:55.474716200Z  5%          100            100
2021-07-14T12:03:55.474718800Z 10%          200            100       Obs              30,000
2021-07-14T12:03:55.474721500Z 25%          200            100       Sum of Wgt.      30,000
2021-07-14T12:03:55.474724100Z 
2021-07-14T12:03:55.474726600Z 50%          300                      Mean             259.93
2021-07-14T12:03:55.480754200Z                         Largest       Std. Dev.      66.25865
2021-07-14T12:03:55.480784200Z 75%          300            300
2021-07-14T12:03:55.480790100Z 90%          300            300       Variance       4390.208
2021-07-14T12:03:55.480793600Z 95%          300            300       Skewness      -1.393157
2021-07-14T12:03:55.480797500Z 99%          300            300       Kurtosis       3.603842
2021-07-14T12:03:55.480801700Z 
2021-07-14T12:03:55.480805800Z                              stp
2021-07-14T12:03:55.480809500Z -------------------------------------------------------------
2021-07-14T12:03:55.480813100Z no observations
2021-07-14T12:03:55.480816500Z 
2021-07-14T12:03:55.480820000Z                           ethnicity
2021-07-14T12:03:55.480824300Z -------------------------------------------------------------
2021-07-14T12:03:55.480828200Z       Percentiles      Smallest
2021-07-14T12:03:55.480832300Z  1%            1              1
2021-07-14T12:03:55.482232100Z  5%            1              1
2021-07-14T12:03:55.482247500Z 10%            1              1       Obs              22,500
2021-07-14T12:03:55.482251200Z 25%            1              1       Sum of Wgt.      22,500
2021-07-14T12:03:55.482254100Z 
2021-07-14T12:03:55.482256700Z 50%            1                      Mean           1.599911
2021-07-14T12:03:55.482259300Z                         Largest       Std. Dev.      1.283122
2021-07-14T12:03:55.482262200Z 75%            1              5
2021-07-14T12:03:55.482264800Z 90%            5              5       Variance       1.646402
2021-07-14T12:03:55.482267400Z 95%            5              5       Skewness       1.921605
2021-07-14T12:03:55.482270200Z 99%            5              5       Kurtosis       5.148077
2021-07-14T12:03:55.482272800Z 
2021-07-14T12:03:55.501546900Z                         household_id
2021-07-14T12:03:55.501570800Z -------------------------------------------------------------
2021-07-14T12:03:55.501574200Z       Percentiles      Smallest
2021-07-14T12:03:55.501576600Z  1%        532.5            241
2021-07-14T12:03:55.501579000Z  5%        666.5            271
2021-07-14T12:03:55.501581400Z 10%          740            282       Obs              30,000
2021-07-14T12:03:55.501584000Z 25%          861            291       Sum of Wgt.      30,000
2021-07-14T12:03:55.501586400Z 
2021-07-14T12:03:55.501588700Z 50%          997                      Mean           995.9429
2021-07-14T12:03:55.501591200Z                         Largest       Std. Dev.      199.1789
2021-07-14T12:03:55.501593600Z 75%         1130           1737
2021-07-14T12:03:55.512733500Z 90%         1251           1740       Variance       39672.24
2021-07-14T12:03:55.512765100Z 95%         1324           1799       Skewness      -.0094109
2021-07-14T12:03:55.512771700Z 99%         1460           1848       Kurtosis       3.003612
2021-07-14T12:03:55.512777100Z 
2021-07-14T12:03:55.512781100Z                        household_size
2021-07-14T12:03:55.512785400Z -------------------------------------------------------------
2021-07-14T12:03:55.512790400Z       Percentiles      Smallest
2021-07-14T12:03:55.512793900Z  1%            0             -1
2021-07-14T12:03:55.512796600Z  5%            1              0
2021-07-14T12:03:55.512799100Z 10%            1              0       Obs              30,000
2021-07-14T12:03:55.512801800Z 25%            2              0       Sum of Wgt.      30,000
2021-07-14T12:03:55.512804500Z 
2021-07-14T12:03:55.514313800Z 50%            3                      Mean           2.505633
2021-07-14T12:03:55.514327800Z                         Largest       Std. Dev.       1.03904
2021-07-14T12:03:55.514331600Z 75%            3              6
2021-07-14T12:03:55.514334400Z 90%            4              6       Variance       1.079604
2021-07-14T12:03:55.514337200Z 95%            4              6       Skewness       .0124485
2021-07-14T12:03:55.514340000Z 99%            5              7       Kurtosis       2.909716
2021-07-14T12:03:55.514343000Z 
2021-07-14T12:03:55.514345600Z                        care_home_type
2021-07-14T12:03:55.514348200Z -------------------------------------------------------------
2021-07-14T12:03:55.514350800Z no observations
2021-07-14T12:03:55.514353400Z 
2021-07-14T12:03:55.514355900Z                              bmi
2021-07-14T12:03:55.534259300Z -------------------------------------------------------------
2021-07-14T12:03:55.534295600Z       Percentiles      Smallest
2021-07-14T12:03:55.534351800Z  1%            0      -4.382936
2021-07-14T12:03:55.534355500Z  5%            0      -3.245161
2021-07-14T12:03:55.534358300Z 10%     18.73098      -2.257665       Obs              30,000
2021-07-14T12:03:55.534361100Z 25%     26.94995      -.7829964       Sum of Wgt.      30,000
2021-07-14T12:03:55.534363800Z 
2021-07-14T12:03:55.534366400Z 50%      34.2056                      Mean           33.15676
2021-07-14T12:03:55.534369400Z                         Largest       Std. Dev.      12.35363
2021-07-14T12:03:55.534372200Z 75%     41.15517       77.05007
2021-07-14T12:03:55.534375000Z 90%     47.44525       79.01958       Variance       152.6121
2021-07-14T12:03:55.553670900Z 95%     51.12595       79.78156       Skewness      -.6839355
2021-07-14T12:03:55.553707600Z 99%     58.12388       80.29907       Kurtosis       3.909609
2021-07-14T12:03:55.553713300Z 
2021-07-14T12:03:55.553717300Z                            bp_sys
2021-07-14T12:03:55.553721200Z -------------------------------------------------------------
2021-07-14T12:03:55.553725600Z       Percentiles      Smallest
2021-07-14T12:03:55.553730300Z  1%            0              0
2021-07-14T12:03:55.553735000Z  5%     19.50844              0
2021-07-14T12:03:55.553739800Z 10%     63.67217              0       Obs              30,000
2021-07-14T12:03:55.553744000Z 25%      71.9235              0       Sum of Wgt.      30,000
2021-07-14T12:03:55.553746900Z 
2021-07-14T12:03:55.553749600Z 50%     79.36414                      Mean           75.97747
2021-07-14T12:03:55.577720400Z                         Largest       Std. Dev.      19.98321
2021-07-14T12:03:55.577752800Z 75%      86.3961       115.3955
2021-07-14T12:03:55.577756600Z 90%     92.51933       116.0357       Variance       399.3287
2021-07-14T12:03:55.577759300Z 95%     96.11777       116.6053       Skewness      -2.598764
2021-07-14T12:03:55.577761900Z 99%     103.0095       117.7032       Kurtosis       10.68666
2021-07-14T12:03:55.577764700Z 
2021-07-14T12:03:55.577767100Z                            bp_dias
2021-07-14T12:03:55.577769700Z -------------------------------------------------------------
2021-07-14T12:03:55.577772400Z       Percentiles      Smallest
2021-07-14T12:03:55.577774900Z  1%            0              0
2021-07-14T12:03:55.577777400Z  5%     40.46916              0
2021-07-14T12:03:55.578860700Z 10%     103.6327              0       Obs              30,000
2021-07-14T12:03:55.578885200Z 25%     111.9453              0       Sum of Wgt.      30,000
2021-07-14T12:03:55.578889100Z 
2021-07-14T12:03:55.578891800Z 50%     119.3115                      Mean           113.9607
2021-07-14T12:03:55.578894600Z                         Largest       Std. Dev.      27.89584
2021-07-14T12:03:55.578905600Z 75%     126.3275       153.8527
2021-07-14T12:03:55.578908400Z 90%     132.5208       156.0645       Variance       778.1778
2021-07-14T12:03:55.578911000Z 95%     136.1324       156.4576       Skewness      -3.321489
2021-07-14T12:03:55.578913600Z 99%     142.9963       158.0234       Kurtosis       14.00886
2021-07-14T12:03:55.578916700Z 
2021-07-14T12:03:55.578919200Z                          creatinine
2021-07-14T12:03:55.597729700Z -------------------------------------------------------------
2021-07-14T12:03:55.597749900Z       Percentiles      Smallest
2021-07-14T12:03:55.597753700Z  1%            0      -.9386805
2021-07-14T12:03:55.597756700Z  5%            0              0
2021-07-14T12:03:55.597759600Z 10%     35.62348              0       Obs              30,000
2021-07-14T12:03:55.597762600Z 25%     47.81062              0       Sum of Wgt.      30,000
2021-07-14T12:03:55.597765800Z 
2021-07-14T12:03:55.597768600Z 50%     58.94358                      Mean           56.95693
2021-07-14T12:03:55.597771500Z                         Largest       Std. Dev.      19.59812
2021-07-14T12:03:55.597774400Z 75%     69.45284       113.5648
2021-07-14T12:03:55.597777200Z 90%     78.72683       116.7536       Variance       384.0865
2021-07-14T12:03:55.598706300Z 95%     84.36575       118.4073       Skewness      -.9636657
2021-07-14T12:03:55.598724400Z 99%     94.45182       120.1664       Kurtosis       4.613714
2021-07-14T12:03:55.598731100Z 
2021-07-14T12:03:55.598735700Z                        smoking_status
2021-07-14T12:03:55.598740300Z -------------------------------------------------------------
2021-07-14T12:03:55.598745200Z no observations
2021-07-14T12:03:55.598749900Z 
2021-07-14T12:03:55.598769200Z                         diabetes_type
2021-07-14T12:03:55.598771900Z -------------------------------------------------------------
2021-07-14T12:03:55.598774500Z no observations
2021-07-14T12:03:55.598776900Z 
2021-07-14T12:03:55.598779200Z                      diabetes_exeter_os
2021-07-14T12:03:55.598781600Z -------------------------------------------------------------
2021-07-14T12:03:55.598784200Z no observations
2021-07-14T12:03:55.598786800Z 
2021-07-14T12:03:55.598789200Z                        diabetes_exeter
2021-07-14T12:03:55.617515200Z -------------------------------------------------------------
2021-07-14T12:03:55.617551100Z no observations
2021-07-14T12:03:55.617555500Z 
2021-07-14T12:03:55.617558700Z                      hba1c_mmol_per_mol
2021-07-14T12:03:55.617561900Z -------------------------------------------------------------
2021-07-14T12:03:55.617565100Z       Percentiles      Smallest
2021-07-14T12:03:55.617577400Z  1%    -5.706117      -46.36222
2021-07-14T12:03:55.617580800Z  5%            0       -41.3422
2021-07-14T12:03:55.617583900Z 10%      7.80572      -39.23513       Obs              30,000
2021-07-14T12:03:55.617587000Z 25%     24.01135      -36.62911       Sum of Wgt.      30,000
2021-07-14T12:03:55.617590200Z 
2021-07-14T12:03:55.617593100Z 50%     38.77304                      Mean           38.08945
2021-07-14T12:03:55.636799500Z                         Largest       Std. Dev.      21.30718
2021-07-14T12:03:55.636831100Z 75%     52.74963       112.5879
2021-07-14T12:03:55.636836800Z 90%     65.20428       114.8057       Variance       453.9961
2021-07-14T12:03:55.636841200Z 95%     72.40793       115.5605       Skewness      -.0408853
2021-07-14T12:03:55.636866900Z 99%     86.40678        116.003       Kurtosis       2.728592
2021-07-14T12:03:55.636871200Z 
2021-07-14T12:03:55.636875600Z                       hba1c_percentage
2021-07-14T12:03:55.636879900Z -------------------------------------------------------------
2021-07-14T12:03:55.636884100Z       Percentiles      Smallest
2021-07-14T12:03:55.636888300Z  1%            0      -2.414918
2021-07-14T12:03:55.636892400Z  5%            0      -2.251907
2021-07-14T12:03:55.638487600Z 10%     1.746815      -2.216992       Obs              30,000
2021-07-14T12:03:55.638501500Z 25%     3.383927      -2.053671       Sum of Wgt.      30,000
2021-07-14T12:03:55.638505100Z 
2021-07-14T12:03:55.638507800Z 50%     4.874967                      Mean           4.758147
2021-07-14T12:03:55.638510400Z                         Largest       Std. Dev.      2.243685
2021-07-14T12:03:55.638513000Z 75%     6.276548       11.94601
2021-07-14T12:03:55.638515800Z 90%     7.532015       12.11049       Variance       5.034124
2021-07-14T12:03:55.638518400Z 95%     8.273013       12.15157       Skewness      -.2228103
2021-07-14T12:03:55.638521000Z 99%     9.594827       12.37769       Kurtosis       2.895986
2021-07-14T12:03:55.638523600Z 
2021-07-14T12:03:55.638526000Z                            asthma
2021-07-14T12:03:55.641114200Z -------------------------------------------------------------
2021-07-14T12:03:55.641127700Z       Percentiles      Smallest
2021-07-14T12:03:55.641131400Z  1%            0              0
2021-07-14T12:03:55.641134100Z  5%            0              0
2021-07-14T12:03:55.641136700Z 10%            0              0       Obs               6,000
2021-07-14T12:03:55.641139400Z 25%            0              0       Sum of Wgt.       6,000
2021-07-14T12:03:55.641142100Z 
2021-07-14T12:03:55.641144600Z 50%            0                      Mean           .7086667
2021-07-14T12:03:55.641160200Z                         Largest       Std. Dev.      .9066027
2021-07-14T12:03:55.641163000Z 75%            2              2
2021-07-14T12:03:55.641165500Z 90%            2              2       Variance       .8219285
2021-07-14T12:03:55.675655400Z 95%            2              2       Skewness       .6062466
2021-07-14T12:03:55.675680400Z 99%            2              2       Kurtosis       1.491506
2021-07-14T12:03:55.675684000Z 
2021-07-14T12:03:55.675686600Z                          patient_id
2021-07-14T12:03:55.675689200Z -------------------------------------------------------------
2021-07-14T12:03:55.675691800Z       Percentiles      Smallest
2021-07-14T12:03:55.675694400Z  1%         2927              2
2021-07-14T12:03:55.675696800Z  5%      14704.5              3
2021-07-14T12:03:55.675699300Z 10%        29273             33       Obs              30,000
2021-07-14T12:03:55.675701700Z 25%        74828             34       Sum of Wgt.      30,000
2021-07-14T12:03:55.675704200Z 
2021-07-14T12:03:55.675706400Z 50%     149946.5                      Mean           149655.6
2021-07-14T12:03:55.678746400Z                         Largest       Std. Dev.      86401.64
2021-07-14T12:03:55.678761700Z 75%     223855.5         299980
2021-07-14T12:03:55.678766700Z 90%     270195.5         299982       Variance       7.47e+09
2021-07-14T12:03:55.678784700Z 95%     284892.5         299987       Skewness      -.0004434
2021-07-14T12:03:55.678788100Z 99%       296855         299991       Kurtosis       1.813456
2021-07-14T12:03:55.678791500Z 
2021-07-14T12:03:55.678794800Z                         diabetes_date
2021-07-14T12:03:55.678798000Z -------------------------------------------------------------
2021-07-14T12:03:55.678801400Z       Percentiles      Smallest
2021-07-14T12:03:55.678804700Z  1%    15jul1970      15jan1970
2021-07-14T12:03:55.678808000Z  5%    15dec1972      15jan1970
2021-07-14T12:03:55.679944100Z 10%    15jan1975      15jan1970       Obs               1,517
2021-07-14T12:03:55.679957600Z 25%    15may1982      15jan1970       Sum of Wgt.       1,517
2021-07-14T12:03:55.679961400Z 
2021-07-14T12:03:55.679964400Z 50%    15oct1995                      Mean          29jun1995
2021-07-14T12:03:55.679968500Z                         Largest       Std. Dev.      5416.488
2021-07-14T12:03:55.679973000Z 75%    15oct2008      15dec2019
2021-07-14T12:03:55.679977700Z 90%    15nov2015      15jan2020       Variance       2.93e+07
2021-07-14T12:03:55.679982000Z 95%    15oct2017      15jan2020       Skewness      -.0265794
2021-07-14T12:03:55.679986700Z 99%    15aug2019      15jan2020       Kurtosis       1.726612
2021-07-14T12:03:55.679991300Z 
2021-07-14T12:03:55.679994000Z                         died_date_ons
2021-07-14T12:03:55.684673400Z -------------------------------------------------------------
2021-07-14T12:03:55.684691100Z       Percentiles      Smallest
2021-07-14T12:03:55.684696700Z  1%    05aug1970      06jan1970
2021-07-14T12:03:55.684701000Z  5%    10oct1972      06jan1970
2021-07-14T12:03:55.684705000Z 10%    23feb1975      17jan1970       Obs               5,884
2021-07-14T12:03:55.684709400Z 25%    20nov1982      23jan1970       Sum of Wgt.       5,884
2021-07-14T12:03:55.684713800Z 
2021-07-14T12:03:55.684718000Z 50%    16jan1996                      Mean          02oct1995
2021-07-14T12:03:55.684722300Z                         Largest       Std. Dev.      5357.668
2021-07-14T12:03:55.684726500Z 75%    06aug2008      25jul2020
2021-07-14T12:03:55.684730400Z 90%    30aug2015      27jul2020       Variance       2.87e+07
2021-07-14T12:03:55.684734500Z 95%    19mar2018      27jul2020       Skewness      -.0393929
2021-07-14T12:03:55.684739200Z 99%    26jan2020      30jul2020       Kurtosis       1.787305
2021-07-14T12:03:55.684741900Z 
2021-07-14T12:03:55.684744500Z . 
2021-07-14T12:03:55.684747100Z . /* CREATE VARIABLES==========================================================
2021-07-14T12:03:55.684749800Z > =*/
2021-07-14T12:03:55.684752600Z . 
2021-07-14T12:03:55.684755000Z . /* DEMOGRAPHICS */
2021-07-14T12:03:55.684771400Z . 
2021-07-14T12:03:55.684773600Z . * Sex
2021-07-14T12:03:55.684800500Z . gen male = 1 if sex == "M"
2021-07-14T12:03:55.690650800Z (15,304 missing values generated)
2021-07-14T12:03:55.690667400Z 
2021-07-14T12:03:55.690673300Z . replace male = 0 if sex == "F"
2021-07-14T12:03:55.696743500Z (15,304 real changes made)
2021-07-14T12:03:55.696759100Z 
2021-07-14T12:03:55.696763700Z . 
2021-07-14T12:03:55.696767600Z . * Ethnicity
2021-07-14T12:03:55.696771600Z . replace ethnicity = .u if ethnicity == .
2021-07-14T12:03:55.699688800Z (7,500 real changes made, 7,500 to missing)
2021-07-14T12:03:55.699706800Z 
2021-07-14T12:03:55.699712000Z . 
2021-07-14T12:03:55.699716500Z . label define ethnicity  1 "White"                                       ///
2021-07-14T12:03:55.699721200Z >                                                 2 "Mixed"                    
2021-07-14T12:03:55.699725900Z >                    ///
2021-07-14T12:03:55.699730400Z >                                                 3 "Asian or Asian British"   
2021-07-14T12:03:55.699754300Z >    ///
2021-07-14T12:03:55.699760100Z >                                                 4 "Black"                    
2021-07-14T12:03:55.699777700Z >                    ///
2021-07-14T12:03:55.699782700Z >                                                 5 "Other"                    
2021-07-14T12:03:55.699786500Z >                    ///
2021-07-14T12:03:55.699790000Z >                                                 .u "Unknown"
2021-07-14T12:03:55.699873400Z 
2021-07-14T12:03:55.699891100Z . 
2021-07-14T12:03:55.699897100Z . label values ethnicity ethnicity
2021-07-14T12:03:55.699901600Z 
2021-07-14T12:03:55.699905600Z . 
2021-07-14T12:03:55.699909900Z . * STP
2021-07-14T12:03:55.699914100Z . rename stp stp_old
2021-07-14T12:03:55.700285400Z 
2021-07-14T12:03:55.700297000Z . bysort stp_old: gen stp = 1 if _n==1
2021-07-14T12:03:55.725069400Z (29,990 missing values generated)
2021-07-14T12:03:55.725088400Z 
2021-07-14T12:03:55.725092100Z . replace stp = sum(stp)
2021-07-14T12:03:55.728191200Z (29,999 real changes made)
2021-07-14T12:03:55.728208100Z 
2021-07-14T12:03:55.728214000Z . drop stp_old
2021-07-14T12:03:55.729623400Z 
2021-07-14T12:03:55.729638200Z . 
2021-07-14T12:03:55.729643300Z . /*  IMD  */
2021-07-14T12:03:55.729646500Z . * Group into 5 groups
2021-07-14T12:03:55.729650400Z . rename imd imd_o
2021-07-14T12:03:55.729780000Z 
2021-07-14T12:03:55.729795500Z . egen imd = cut(imd_o), group(5) icodes
2021-07-14T12:03:55.770566900Z 
2021-07-14T12:03:55.770591600Z . 
2021-07-14T12:03:55.770597600Z . * add one to create groups 1 - 5
2021-07-14T12:03:55.770602700Z . replace imd = imd + 1
2021-07-14T12:03:55.773291300Z (30,000 real changes made)
2021-07-14T12:03:55.773310300Z 
2021-07-14T12:03:55.773314500Z . 
2021-07-14T12:03:55.773317400Z . * - 1 is missing, should be excluded from population
2021-07-14T12:03:55.773320600Z . replace imd = .u if imd_o == -1
2021-07-14T12:03:55.776346900Z (0 real changes made)
2021-07-14T12:03:55.776362400Z 
2021-07-14T12:03:55.776368000Z . drop imd_o
2021-07-14T12:03:55.777635800Z 
2021-07-14T12:03:55.777647800Z . 
2021-07-14T12:03:55.777651200Z . * Reverse the order (so high is more deprived)
2021-07-14T12:03:55.777653800Z . recode imd 5 = 1 4 = 2 3 = 3 2 = 4 1 = 5 .u = .u
2021-07-14T12:03:55.818933000Z (imd: 30000 changes made)
2021-07-14T12:03:55.820756800Z 
2021-07-14T12:03:55.820769700Z . 
2021-07-14T12:03:55.820774900Z . label define imd 1 "1 least deprived" 2 "2" 3 "3" 4 "4" 5 "5 most deprived" .
2021-07-14T12:03:55.820792800Z > u "Unknown"
2021-07-14T12:03:55.820798300Z 
2021-07-14T12:03:55.820801500Z . label values imd imd
2021-07-14T12:03:55.821051800Z 
2021-07-14T12:03:55.821064200Z . 
2021-07-14T12:03:55.821067700Z . /*  Age variables  */
2021-07-14T12:03:55.821070400Z . 
2021-07-14T12:03:55.821072900Z . * Create categorised age
2021-07-14T12:03:55.821075400Z . recode age 18/29.9999 = 1 ///
2021-07-14T12:03:55.821078200Z >                    30/39.9999 = 2 ///
2021-07-14T12:03:55.821080900Z >            40/49.9999 = 3 ///
2021-07-14T12:03:55.821083600Z >                    50/59.9999 = 4 ///
2021-07-14T12:03:55.821086200Z >                60/69.9999 = 5 ///
2021-07-14T12:03:55.821088700Z >                    70/79.9999 = 6 ///
2021-07-14T12:03:55.821091200Z >                    80/max = 7, gen(agegroup)
2021-07-14T12:03:55.917154500Z (23694 differences between age and agegroup)
2021-07-14T12:03:55.924982000Z 
2021-07-14T12:03:55.924999900Z . 
2021-07-14T12:03:55.925003500Z . label define agegroup   1 "18-<30" ///
2021-07-14T12:03:55.925006600Z >                                                 2 "30-<40" ///
2021-07-14T12:03:55.925009600Z >                                                 3 "40-<50" ///
2021-07-14T12:03:55.925012300Z >                                                 4 "50-<60" ///
2021-07-14T12:03:55.925015400Z >                                                 5 "60-<70" ///
2021-07-14T12:03:55.925018100Z >                                                 6 "70-<80" ///
2021-07-14T12:03:55.925020900Z >                                                 7 "80+"
2021-07-14T12:03:55.925023700Z 
2021-07-14T12:03:55.925026500Z . 
2021-07-14T12:03:55.925030600Z . label values agegroup agegroup
2021-07-14T12:03:55.925185700Z 
2021-07-14T12:03:55.925213900Z . 
2021-07-14T12:03:55.925219200Z . * Create binary age (for age stratification)
2021-07-14T12:03:55.925224100Z . recode age min/65.999999999 = 0 ///
2021-07-14T12:03:55.925228700Z >            66/max = 1, gen(age66)
2021-07-14T12:03:55.959249000Z (29660 differences between age and age66)
2021-07-14T12:03:55.968350000Z 
2021-07-14T12:03:55.968374300Z . 
2021-07-14T12:03:55.968380700Z . * Check there are no missing ages
2021-07-14T12:03:55.968386100Z . assert age < .
2021-07-14T12:03:55.970528600Z 
2021-07-14T12:03:55.970542700Z . assert agegroup < .
2021-07-14T12:03:55.972288000Z 
2021-07-14T12:03:55.972303100Z . assert age66 < .
2021-07-14T12:03:55.973890800Z 
2021-07-14T12:03:55.973903800Z . 
2021-07-14T12:03:55.973908500Z . 
2021-07-14T12:03:55.973912600Z . /* APPLY HH level INCLUSION/EXCLUIONS========================================
2021-07-14T12:03:55.973916900Z > ==========*/
2021-07-14T12:03:55.973921100Z . *tab care_home_type household_size
2021-07-14T12:03:55.973925400Z . drop if care_home_type!="U"
2021-07-14T12:03:55.984694500Z (869 observations deleted)
2021-07-14T12:03:55.984717900Z 
2021-07-14T12:03:55.984733800Z . 
2021-07-14T12:03:55.984739500Z . count
2021-07-14T12:03:55.984831300Z   29,131
2021-07-14T12:03:55.984848000Z 
2021-07-14T12:03:55.984854400Z . noi di "DROP if HH ID==0"
2021-07-14T12:03:55.984859400Z DROP if HH ID==0
2021-07-14T12:03:55.984863900Z 
2021-07-14T12:03:55.984868200Z . count if household_id==0
2021-07-14T12:03:55.988077700Z   0
2021-07-14T12:03:55.988094100Z 
2021-07-14T12:03:55.988100700Z . drop if household_id==0
2021-07-14T12:03:55.992018100Z (0 observations deleted)
2021-07-14T12:03:55.992035600Z 
2021-07-14T12:03:55.992041600Z . count
2021-07-14T12:03:55.992207300Z   29,131
2021-07-14T12:03:55.992220900Z 
2021-07-14T12:03:55.992226700Z . 
2021-07-14T12:03:55.992231600Z . noi di "DROP HH>=10 persons:"
2021-07-14T12:03:55.992235400Z DROP HH>=10 persons:
2021-07-14T12:03:55.992238300Z 
2021-07-14T12:03:55.992241100Z . sum household_size, d
2021-07-14T12:03:56.009746100Z 
2021-07-14T12:03:56.009772900Z                        household_size
2021-07-14T12:03:56.009780000Z -------------------------------------------------------------
2021-07-14T12:03:56.009784600Z       Percentiles      Smallest
2021-07-14T12:03:56.009788700Z  1%            0             -1
2021-07-14T12:03:56.009793800Z  5%            1              0
2021-07-14T12:03:56.009798200Z 10%            1              0       Obs              29,131
2021-07-14T12:03:56.009802900Z 25%            2              0       Sum of Wgt.      29,131
2021-07-14T12:03:56.009808000Z 
2021-07-14T12:03:56.009813200Z 50%            3                      Mean           2.503004
2021-07-14T12:03:56.009817800Z                         Largest       Std. Dev.      1.037678
2021-07-14T12:03:56.009824200Z 75%            3              6
2021-07-14T12:03:56.009828600Z 90%            4              6       Variance       1.076776
2021-07-14T12:03:56.009833000Z 95%            4              6       Skewness       .0120816
2021-07-14T12:03:56.009837400Z 99%            5              7       Kurtosis       2.923008
2021-07-14T12:03:56.009867800Z 
2021-07-14T12:03:56.009873300Z . drop if household_size>=10
2021-07-14T12:03:56.012900100Z (0 observations deleted)
2021-07-14T12:03:56.012935600Z 
2021-07-14T12:03:56.012941600Z . count
2021-07-14T12:03:56.012946300Z   29,131
2021-07-14T12:03:56.012950800Z 
2021-07-14T12:03:56.012955000Z . 
2021-07-14T12:03:56.012959700Z . noi di "DROP MISSING GENDER:"
2021-07-14T12:03:56.012963100Z DROP MISSING GENDER:
2021-07-14T12:03:56.012965900Z 
2021-07-14T12:03:56.012968600Z . recode male .=9
2021-07-14T12:03:56.028813000Z (male: 0 changes made)
2021-07-14T12:03:56.031523500Z 
2021-07-14T12:03:56.031540300Z . recode male .u=9
2021-07-14T12:03:56.049431700Z (male: 0 changes made)
2021-07-14T12:03:56.053498200Z 
2021-07-14T12:03:56.053517200Z . bysort household_id: egen male_drop=max(male)
2021-07-14T12:03:56.144653300Z 
2021-07-14T12:03:56.144674500Z . drop if male_drop==9
2021-07-14T12:03:56.146285400Z (0 observations deleted)
2021-07-14T12:03:56.146299300Z 
2021-07-14T12:03:56.146303400Z . 
2021-07-14T12:03:56.146321400Z . noi di "DROP AGE MISSING:"
2021-07-14T12:03:56.146325700Z DROP AGE MISSING:
2021-07-14T12:03:56.146344400Z 
2021-07-14T12:03:56.146348900Z . recode age .=9
2021-07-14T12:03:56.161589300Z (age: 0 changes made)
2021-07-14T12:03:56.163823600Z 
2021-07-14T12:03:56.163844500Z . recode age .u=9
2021-07-14T12:03:56.179394000Z (age: 0 changes made)
2021-07-14T12:03:56.181534900Z 
2021-07-14T12:03:56.181549300Z . bysort household_id: egen age_drop=max(age)
2021-07-14T12:03:56.260228400Z 
2021-07-14T12:03:56.260253700Z . drop if age_drop==9
2021-07-14T12:03:56.265806900Z (1 observation deleted)
2021-07-14T12:03:56.265841300Z 
2021-07-14T12:03:56.265847000Z . 
2021-07-14T12:03:56.265849900Z . noi di "DROP IMD MISSING"
2021-07-14T12:03:56.265852600Z DROP IMD MISSING
2021-07-14T12:03:56.265855300Z 
2021-07-14T12:03:56.265857900Z . recode imd .=9
2021-07-14T12:03:56.278789500Z (imd: 0 changes made)
2021-07-14T12:03:56.280848800Z 
2021-07-14T12:03:56.280863400Z . recode imd .u=9
2021-07-14T12:03:56.293944800Z (imd: 0 changes made)
2021-07-14T12:03:56.295743200Z 
2021-07-14T12:03:56.295771600Z . bysort household_id: egen imd_drop=max(imd)
2021-07-14T12:03:56.361288700Z 
2021-07-14T12:03:56.361312300Z . drop if imd_drop==9
2021-07-14T12:03:56.363338900Z (0 observations deleted)
2021-07-14T12:03:56.363353900Z 
2021-07-14T12:03:56.363357600Z . 
2021-07-14T12:03:56.363360600Z . **************************** HOUSEHOLD VARS**********************************
2021-07-14T12:03:56.363363700Z > *********
2021-07-14T12:03:56.363366700Z . 
2021-07-14T12:03:56.363369500Z . *No kids/kids under 12/up to 18
2021-07-14T12:03:56.363372300Z . *Identify kids under 12, or kids under 18
2021-07-14T12:03:56.363375200Z . gen nokids=1 if age<5
2021-07-14T12:03:56.366598700Z (27,384 missing values generated)
2021-07-14T12:03:56.366629800Z 
2021-07-14T12:03:56.366634200Z . recode nokids .=2 if age<12
2021-07-14T12:03:56.386378000Z (nokids: 2400 changes made)
2021-07-14T12:03:56.388903700Z 
2021-07-14T12:03:56.388918900Z . recode nokids .=3 if age<18 
2021-07-14T12:03:56.408787100Z (nokids: 1990 changes made)
2021-07-14T12:03:56.411056000Z 
2021-07-14T12:03:56.411071900Z . 
2021-07-14T12:03:56.411075800Z . preserve
2021-07-14T12:03:56.417313500Z 
2021-07-14T12:03:56.417351600Z . keep if age<18
2021-07-14T12:03:56.422677500Z (22,994 observations deleted)
2021-07-14T12:03:56.422697900Z 
2021-07-14T12:03:56.422703800Z . keep household_id nokids
2021-07-14T12:03:56.422904000Z 
2021-07-14T12:03:56.422914200Z . duplicates drop
2021-07-14T12:03:56.423924800Z 
2021-07-14T12:03:56.423954500Z Duplicates in terms of all variables
2021-07-14T12:03:56.454739400Z 
2021-07-14T12:03:56.457186600Z (3,869 observations deleted)
2021-07-14T12:03:56.457214600Z 
2021-07-14T12:03:56.457217800Z . bysort household_id: replace nokids=4 if _N>1
2021-07-14T12:03:56.459072500Z (2,023 real changes made)
2021-07-14T12:03:56.459086800Z 
2021-07-14T12:03:56.459092300Z . duplicates drop
2021-07-14T12:03:56.459717400Z 
2021-07-14T12:03:56.459730300Z Duplicates in terms of all variables
2021-07-14T12:03:56.467764300Z 
2021-07-14T12:03:56.468897300Z (1,277 observations deleted)
2021-07-14T12:03:56.468912000Z 
2021-07-14T12:03:56.468918000Z . rename nokids kids_cat5
2021-07-14T12:03:56.468922700Z 
2021-07-14T12:03:56.468927400Z . list in 1/100
2021-07-14T12:03:56.469774500Z 
2021-07-14T12:03:56.469789900Z      +---------------------+
2021-07-14T12:03:56.469795900Z      | househ~d   kids_c~5 |
2021-07-14T12:03:56.469812000Z      |---------------------|
2021-07-14T12:03:56.469815700Z   1. |      271          2 |
2021-07-14T12:03:56.469818600Z   2. |      282          2 |
2021-07-14T12:03:56.469821600Z   3. |      306          3 |
2021-07-14T12:03:56.469824500Z   4. |      338          3 |
2021-07-14T12:03:56.469827400Z   5. |      342          2 |
2021-07-14T12:03:56.469830100Z      |---------------------|
2021-07-14T12:03:56.469832900Z   6. |      350          3 |
2021-07-14T12:03:56.469835600Z   7. |      354          1 |
2021-07-14T12:03:56.469838400Z   8. |      364          3 |
2021-07-14T12:03:56.469841200Z   9. |      379          3 |
2021-07-14T12:03:56.469844200Z  10. |      382          2 |
2021-07-14T12:03:56.469847000Z      |---------------------|
2021-07-14T12:03:56.469864600Z  11. |      396          3 |
2021-07-14T12:03:56.469867100Z  12. |      397          2 |
2021-07-14T12:03:56.469869400Z  13. |      419          3 |
2021-07-14T12:03:56.469871800Z  14. |      429          3 |
2021-07-14T12:03:56.469893300Z  15. |      433          3 |
2021-07-14T12:03:56.469896100Z      |---------------------|
2021-07-14T12:03:56.469899100Z  16. |      436          2 |
2021-07-14T12:03:56.469902200Z  17. |      437          2 |
2021-07-14T12:03:56.469905100Z  18. |      439          2 |
2021-07-14T12:03:56.469908000Z  19. |      442          1 |
2021-07-14T12:03:56.469910800Z  20. |      444          3 |
2021-07-14T12:03:56.469913600Z      |---------------------|
2021-07-14T12:03:56.469916300Z  21. |      446          2 |
2021-07-14T12:03:56.469919100Z  22. |      448          1 |
2021-07-14T12:03:56.469922200Z  23. |      455          3 |
2021-07-14T12:03:56.469925200Z  24. |      456          3 |
2021-07-14T12:03:56.469928200Z  25. |      457          1 |
2021-07-14T12:03:56.469931200Z      |---------------------|
2021-07-14T12:03:56.469933900Z  26. |      460          2 |
2021-07-14T12:03:56.470186900Z  27. |      462          1 |
2021-07-14T12:03:56.470215300Z  28. |      463          1 |
2021-07-14T12:03:56.470240300Z  29. |      464          3 |
2021-07-14T12:03:56.470244900Z  30. |      469          1 |
2021-07-14T12:03:56.470249600Z      |---------------------|
2021-07-14T12:03:56.470253900Z  31. |      472          4 |
2021-07-14T12:03:56.470258800Z  32. |      474          2 |
2021-07-14T12:03:56.470263500Z  33. |      480          2 |
2021-07-14T12:03:56.470267900Z  34. |      484          2 |
2021-07-14T12:03:56.470280100Z  35. |      485          2 |
2021-07-14T12:03:56.470294600Z      |---------------------|
2021-07-14T12:03:56.470300000Z  36. |      487          3 |
2021-07-14T12:03:56.470304900Z  37. |      490          4 |
2021-07-14T12:03:56.470309100Z  38. |      496          2 |
2021-07-14T12:03:56.470313700Z  39. |      498          3 |
2021-07-14T12:03:56.470318300Z  40. |      499          2 |
2021-07-14T12:03:56.470322900Z      |---------------------|
2021-07-14T12:03:56.470327700Z  41. |      500          3 |
2021-07-14T12:03:56.470330600Z  42. |      502          3 |
2021-07-14T12:03:56.470333400Z  43. |      505          4 |
2021-07-14T12:03:56.470336200Z  44. |      507          3 |
2021-07-14T12:03:56.470339100Z  45. |      508          2 |
2021-07-14T12:03:56.470342100Z      |---------------------|
2021-07-14T12:03:56.470344900Z  46. |      509          3 |
2021-07-14T12:03:56.470347800Z  47. |      510          1 |
2021-07-14T12:03:56.470350600Z  48. |      513          2 |
2021-07-14T12:03:56.470353300Z  49. |      515          4 |
2021-07-14T12:03:56.470356000Z  50. |      518          1 |
2021-07-14T12:03:56.470358900Z      |---------------------|
2021-07-14T12:03:56.470361600Z  51. |      520          1 |
2021-07-14T12:03:56.470364500Z  52. |      522          4 |
2021-07-14T12:03:56.470367400Z  53. |      523          3 |
2021-07-14T12:03:56.470370300Z  54. |      524          3 |
2021-07-14T12:03:56.470373200Z  55. |      528          3 |
2021-07-14T12:03:56.470695500Z      |---------------------|
2021-07-14T12:03:56.470712100Z  56. |      531          1 |
2021-07-14T12:03:56.470716900Z  57. |      533          4 |
2021-07-14T12:03:56.470721600Z  58. |      534          3 |
2021-07-14T12:03:56.470726300Z  59. |      535          2 |
2021-07-14T12:03:56.470730500Z  60. |      536          1 |
2021-07-14T12:03:56.470735000Z      |---------------------|
2021-07-14T12:03:56.470739700Z  61. |      541          2 |
2021-07-14T12:03:56.470744200Z  62. |      542          2 |
2021-07-14T12:03:56.470748600Z  63. |      543          4 |
2021-07-14T12:03:56.470753200Z  64. |      544          1 |
2021-07-14T12:03:56.470757700Z  65. |      545          2 |
2021-07-14T12:03:56.470762300Z      |---------------------|
2021-07-14T12:03:56.470765200Z  66. |      546          1 |
2021-07-14T12:03:56.470768000Z  67. |      547          3 |
2021-07-14T12:03:56.470771000Z  68. |      549          3 |
2021-07-14T12:03:56.470773800Z  69. |      553          1 |
2021-07-14T12:03:56.470776700Z  70. |      555          4 |
2021-07-14T12:03:56.470779600Z      |---------------------|
2021-07-14T12:03:56.470803100Z  71. |      556          4 |
2021-07-14T12:03:56.470805700Z  72. |      557          2 |
2021-07-14T12:03:56.470827000Z  73. |      558          3 |
2021-07-14T12:03:56.470831200Z  74. |      559          4 |
2021-07-14T12:03:56.470835700Z  75. |      560          1 |
2021-07-14T12:03:56.470840400Z      |---------------------|
2021-07-14T12:03:56.470845300Z  76. |      562          2 |
2021-07-14T12:03:56.470849800Z  77. |      563          3 |
2021-07-14T12:03:56.470854300Z  78. |      564          4 |
2021-07-14T12:03:56.470858700Z  79. |      565          4 |
2021-07-14T12:03:56.470863200Z  80. |      566          3 |
2021-07-14T12:03:56.470867500Z      |---------------------|
2021-07-14T12:03:56.470872100Z  81. |      567          4 |
2021-07-14T12:03:56.470877000Z  82. |      568          3 |
2021-07-14T12:03:56.470881700Z  83. |      569          4 |
2021-07-14T12:03:56.471083700Z  84. |      571          4 |
2021-07-14T12:03:56.471096600Z  85. |      573          2 |
2021-07-14T12:03:56.471102100Z      |---------------------|
2021-07-14T12:03:56.471106900Z  86. |      575          4 |
2021-07-14T12:03:56.471111400Z  87. |      576          4 |
2021-07-14T12:03:56.471116000Z  88. |      577          4 |
2021-07-14T12:03:56.471120900Z  89. |      578          2 |
2021-07-14T12:03:56.471123900Z  90. |      581          3 |
2021-07-14T12:03:56.471126800Z      |---------------------|
2021-07-14T12:03:56.471130500Z  91. |      582          4 |
2021-07-14T12:03:56.471133400Z  92. |      583          3 |
2021-07-14T12:03:56.471136200Z  93. |      584          4 |
2021-07-14T12:03:56.471139000Z  94. |      585          2 |
2021-07-14T12:03:56.471141900Z  95. |      587          1 |
2021-07-14T12:03:56.471145500Z      |---------------------|
2021-07-14T12:03:56.471150000Z  96. |      589          3 |
2021-07-14T12:03:56.471154700Z  97. |      591          4 |
2021-07-14T12:03:56.471159000Z  98. |      592          3 |
2021-07-14T12:03:56.471163400Z  99. |      594          4 |
2021-07-14T12:03:56.471167600Z 100. |      595          2 |
2021-07-14T12:03:56.471171800Z      +---------------------+
2021-07-14T12:03:56.471176100Z 
2021-07-14T12:03:56.471180800Z . save kids_mixed_category, replace
2021-07-14T12:03:56.471310800Z (note: file kids_mixed_category.dta not found)
2021-07-14T12:03:56.471324500Z file kids_mixed_category.dta saved
2021-07-14T12:03:56.471329900Z 
2021-07-14T12:03:56.471334700Z . restore
2021-07-14T12:03:56.475841200Z 
2021-07-14T12:03:56.475861300Z . 
2021-07-14T12:03:56.475867700Z . merge m:1 household_id using kids_mixed_category, nogen keep(master match)
2021-07-14T12:03:56.490951100Z 
2021-07-14T12:03:56.490972200Z     Result                           # of obs.
2021-07-14T12:03:56.490978000Z     -----------------------------------------
2021-07-14T12:03:56.490982800Z     not matched                           601
2021-07-14T12:03:56.490987100Z         from master                       601  
2021-07-14T12:03:56.490991300Z         from using                          0  
2021-07-14T12:03:56.490994300Z 
2021-07-14T12:03:56.490996800Z     matched                            28,529  
2021-07-14T12:03:56.490999400Z     -----------------------------------------
2021-07-14T12:03:56.491002000Z 
2021-07-14T12:03:56.491004500Z . 
2021-07-14T12:03:56.491007100Z . lab define   kids_cat5 0 none  1 "only <5 years" ///
2021-07-14T12:03:56.491010100Z > 2 "only 5-11" 3 "12-<18" 4 "mixed"
2021-07-14T12:03:56.491246900Z 
2021-07-14T12:03:56.491277100Z . lab val kids_cat5 kids_cat5
2021-07-14T12:03:56.491436200Z 
2021-07-14T12:03:56.491449900Z . recode kids_cat5 .=0
2021-07-14T12:03:56.505110400Z (kids_cat5: 601 changes made)
2021-07-14T12:03:56.507693900Z 
2021-07-14T12:03:56.507711000Z . tab kids_cat5
2021-07-14T12:03:56.511162300Z 
2021-07-14T12:03:56.511179700Z     kids_cat5 |      Freq.     Percent        Cum.
2021-07-14T12:03:56.511185800Z --------------+-----------------------------------
2021-07-14T12:03:56.511190600Z          none |        601        2.06        2.06
2021-07-14T12:03:56.511195000Z only <5 years |        445        1.53        3.59
2021-07-14T12:03:56.511199400Z     only 5-11 |        668        2.29        5.88
2021-07-14T12:03:56.511203700Z        12-<18 |        650        2.23        8.12
2021-07-14T12:03:56.511207700Z         mixed |     26,766       91.88      100.00
2021-07-14T12:03:56.511211500Z --------------+-----------------------------------
2021-07-14T12:03:56.511215300Z         Total |     29,130      100.00
2021-07-14T12:03:56.511219000Z 
2021-07-14T12:03:56.511222500Z . drop nokids
2021-07-14T12:03:56.512167200Z 
2021-07-14T12:03:56.512181000Z . 
2021-07-14T12:03:56.512185500Z . *Identify kids under 12, or kids under 18
2021-07-14T12:03:56.512189800Z . gen nokids=1 if age<12
2021-07-14T12:03:56.515986700Z (24,984 missing values generated)
2021-07-14T12:03:56.516001600Z 
2021-07-14T12:03:56.516006300Z . recode nokids .=2 if age<18 
2021-07-14T12:03:56.540854500Z (nokids: 1990 changes made)
2021-07-14T12:03:56.543892400Z 
2021-07-14T12:03:56.543910600Z . 
2021-07-14T12:03:56.543915300Z . preserve
2021-07-14T12:03:56.551742000Z 
2021-07-14T12:03:56.551773700Z . keep if age<18
2021-07-14T12:03:56.557633200Z (22,994 observations deleted)
2021-07-14T12:03:56.557658000Z 
2021-07-14T12:03:56.557665000Z . keep household_id nokids
2021-07-14T12:03:56.557873600Z 
2021-07-14T12:03:56.557891900Z . duplicates drop
2021-07-14T12:03:56.558750000Z 
2021-07-14T12:03:56.558767100Z Duplicates in terms of all variables
2021-07-14T12:03:56.587063500Z 
2021-07-14T12:03:56.589956200Z (4,481 observations deleted)
2021-07-14T12:03:56.589986700Z 
2021-07-14T12:03:56.589989800Z . bysort household_id: replace nokids=3 if _N>1
2021-07-14T12:03:56.592238500Z (1,330 real changes made)
2021-07-14T12:03:56.592254200Z 
2021-07-14T12:03:56.592259800Z . duplicates drop
2021-07-14T12:03:56.592760200Z 
2021-07-14T12:03:56.592775700Z Duplicates in terms of all variables
2021-07-14T12:03:56.598446900Z 
2021-07-14T12:03:56.599402400Z (665 observations deleted)
2021-07-14T12:03:56.599429700Z 
2021-07-14T12:03:56.599433200Z . rename nokids kids_cat4
2021-07-14T12:03:56.599436100Z 
2021-07-14T12:03:56.599438600Z . list in 1/100
2021-07-14T12:03:56.600167200Z 
2021-07-14T12:03:56.600183000Z      +---------------------+
2021-07-14T12:03:56.600188900Z      | househ~d   kids_c~4 |
2021-07-14T12:03:56.600193400Z      |---------------------|
2021-07-14T12:03:56.600197600Z   1. |      271          1 |
2021-07-14T12:03:56.600201700Z   2. |      282          1 |
2021-07-14T12:03:56.600205800Z   3. |      306          2 |
2021-07-14T12:03:56.600208500Z   4. |      338          2 |
2021-07-14T12:03:56.600211000Z   5. |      342          1 |
2021-07-14T12:03:56.600213600Z      |---------------------|
2021-07-14T12:03:56.600216200Z   6. |      350          2 |
2021-07-14T12:03:56.600218700Z   7. |      354          1 |
2021-07-14T12:03:56.600221300Z   8. |      364          2 |
2021-07-14T12:03:56.600223800Z   9. |      379          2 |
2021-07-14T12:03:56.600226600Z  10. |      382          1 |
2021-07-14T12:03:56.600243900Z      |---------------------|
2021-07-14T12:03:56.600246600Z  11. |      396          2 |
2021-07-14T12:03:56.600248900Z  12. |      397          1 |
2021-07-14T12:03:56.600252000Z  13. |      419          2 |
2021-07-14T12:03:56.600284300Z  14. |      429          2 |
2021-07-14T12:03:56.600289400Z  15. |      433          2 |
2021-07-14T12:03:56.600294000Z      |---------------------|
2021-07-14T12:03:56.600298600Z  16. |      436          1 |
2021-07-14T12:03:56.600303100Z  17. |      437          1 |
2021-07-14T12:03:56.600307500Z  18. |      439          1 |
2021-07-14T12:03:56.600311700Z  19. |      442          1 |
2021-07-14T12:03:56.600315900Z  20. |      444          2 |
2021-07-14T12:03:56.600319900Z      |---------------------|
2021-07-14T12:03:56.600324000Z  21. |      446          1 |
2021-07-14T12:03:56.600327200Z  22. |      448          1 |
2021-07-14T12:03:56.600331400Z  23. |      455          2 |
2021-07-14T12:03:56.600335600Z  24. |      456          2 |
2021-07-14T12:03:56.600340300Z  25. |      457          1 |
2021-07-14T12:03:56.600363800Z      |---------------------|
2021-07-14T12:03:56.600370100Z  26. |      460          1 |
2021-07-14T12:03:56.600474200Z  27. |      462          1 |
2021-07-14T12:03:56.600488000Z  28. |      463          1 |
2021-07-14T12:03:56.600493400Z  29. |      464          2 |
2021-07-14T12:03:56.600498400Z  30. |      469          1 |
2021-07-14T12:03:56.600502700Z      |---------------------|
2021-07-14T12:03:56.600506900Z  31. |      472          3 |
2021-07-14T12:03:56.600511400Z  32. |      474          1 |
2021-07-14T12:03:56.600515700Z  33. |      480          1 |
2021-07-14T12:03:56.600520000Z  34. |      484          1 |
2021-07-14T12:03:56.600525600Z  35. |      485          1 |
2021-07-14T12:03:56.600530000Z      |---------------------|
2021-07-14T12:03:56.600534000Z  36. |      487          2 |
2021-07-14T12:03:56.600537900Z  37. |      490          3 |
2021-07-14T12:03:56.600542000Z  38. |      496          1 |
2021-07-14T12:03:56.600546000Z  39. |      498          2 |
2021-07-14T12:03:56.600549800Z  40. |      499          1 |
2021-07-14T12:03:56.600553500Z      |---------------------|
2021-07-14T12:03:56.600557400Z  41. |      500          2 |
2021-07-14T12:03:56.600561100Z  42. |      502          2 |
2021-07-14T12:03:56.600564700Z  43. |      505          3 |
2021-07-14T12:03:56.600568700Z  44. |      507          2 |
2021-07-14T12:03:56.600572600Z  45. |      508          1 |
2021-07-14T12:03:56.600577000Z      |---------------------|
2021-07-14T12:03:56.600581000Z  46. |      509          2 |
2021-07-14T12:03:56.600585400Z  47. |      510          1 |
2021-07-14T12:03:56.600589800Z  48. |      513          1 |
2021-07-14T12:03:56.600602200Z  49. |      515          3 |
2021-07-14T12:03:56.600606900Z  50. |      518          1 |
2021-07-14T12:03:56.600611000Z      |---------------------|
2021-07-14T12:03:56.600615200Z  51. |      520          1 |
2021-07-14T12:03:56.600619700Z  52. |      522          3 |
2021-07-14T12:03:56.600624100Z  53. |      523          2 |
2021-07-14T12:03:56.600628500Z  54. |      524          2 |
2021-07-14T12:03:56.600632900Z  55. |      528          2 |
2021-07-14T12:03:56.600756200Z      |---------------------|
2021-07-14T12:03:56.600768600Z  56. |      531          1 |
2021-07-14T12:03:56.600774000Z  57. |      533          1 |
2021-07-14T12:03:56.600778700Z  58. |      534          2 |
2021-07-14T12:03:56.600783000Z  59. |      535          1 |
2021-07-14T12:03:56.600787100Z  60. |      536          1 |
2021-07-14T12:03:56.600791600Z      |---------------------|
2021-07-14T12:03:56.600796000Z  61. |      541          1 |
2021-07-14T12:03:56.600800300Z  62. |      542          1 |
2021-07-14T12:03:56.600804700Z  63. |      543          1 |
2021-07-14T12:03:56.600809300Z  64. |      544          1 |
2021-07-14T12:03:56.600813400Z  65. |      545          1 |
2021-07-14T12:03:56.600817600Z      |---------------------|
2021-07-14T12:03:56.600821900Z  66. |      546          1 |
2021-07-14T12:03:56.600826600Z  67. |      547          2 |
2021-07-14T12:03:56.600830700Z  68. |      549          2 |
2021-07-14T12:03:56.600835100Z  69. |      553          1 |
2021-07-14T12:03:56.600966800Z  70. |      555          1 |
2021-07-14T12:03:56.600983300Z      |---------------------|
2021-07-14T12:03:56.600989600Z  71. |      556          3 |
2021-07-14T12:03:56.600994300Z  72. |      557          1 |
2021-07-14T12:03:56.600998800Z  73. |      558          2 |
2021-07-14T12:03:56.601003300Z  74. |      559          3 |
2021-07-14T12:03:56.601007900Z  75. |      560          1 |
2021-07-14T12:03:56.601012500Z      |---------------------|
2021-07-14T12:03:56.601016800Z  76. |      562          1 |
2021-07-14T12:03:56.601021400Z  77. |      563          2 |
2021-07-14T12:03:56.601026000Z  78. |      564          3 |
2021-07-14T12:03:56.601030800Z  79. |      565          3 |
2021-07-14T12:03:56.601035400Z  80. |      566          2 |
2021-07-14T12:03:56.601039800Z      |---------------------|
2021-07-14T12:03:56.601044700Z  81. |      567          3 |
2021-07-14T12:03:56.601049300Z  82. |      568          2 |
2021-07-14T12:03:56.601054500Z  83. |      569          1 |
2021-07-14T12:03:56.601173800Z  84. |      571          3 |
2021-07-14T12:03:56.601187900Z  85. |      573          1 |
2021-07-14T12:03:56.601193800Z      |---------------------|
2021-07-14T12:03:56.601198200Z  86. |      575          3 |
2021-07-14T12:03:56.601202700Z  87. |      576          3 |
2021-07-14T12:03:56.601207200Z  88. |      577          3 |
2021-07-14T12:03:56.601211700Z  89. |      578          1 |
2021-07-14T12:03:56.601216100Z  90. |      581          2 |
2021-07-14T12:03:56.601220600Z      |---------------------|
2021-07-14T12:03:56.601224700Z  91. |      582          1 |
2021-07-14T12:03:56.601228700Z  92. |      583          2 |
2021-07-14T12:03:56.601233200Z  93. |      584          3 |
2021-07-14T12:03:56.601237700Z  94. |      585          1 |
2021-07-14T12:03:56.601242000Z  95. |      587          1 |
2021-07-14T12:03:56.601246300Z      |---------------------|
2021-07-14T12:03:56.601250700Z  96. |      589          2 |
2021-07-14T12:03:56.601255300Z  97. |      591          3 |
2021-07-14T12:03:56.601260100Z  98. |      592          2 |
2021-07-14T12:03:56.601263000Z  99. |      594          3 |
2021-07-14T12:03:56.601265700Z 100. |      595          1 |
2021-07-14T12:03:56.601268400Z      +---------------------+
2021-07-14T12:03:56.601271100Z 
2021-07-14T12:03:56.601274000Z . save kids_mixed_category, replace
2021-07-14T12:03:56.601442000Z file kids_mixed_category.dta saved
2021-07-14T12:03:56.601455900Z 
2021-07-14T12:03:56.601460600Z . restore
2021-07-14T12:03:56.606511300Z 
2021-07-14T12:03:56.606532100Z . 
2021-07-14T12:03:56.606537300Z . merge m:1 household_id using kids_mixed_category, nogen keep(master match)
2021-07-14T12:03:56.619026700Z 
2021-07-14T12:03:56.619047500Z     Result                           # of obs.
2021-07-14T12:03:56.619053900Z     -----------------------------------------
2021-07-14T12:03:56.619058800Z     not matched                           601
2021-07-14T12:03:56.619063400Z         from master                       601  
2021-07-14T12:03:56.619067800Z         from using                          0  
2021-07-14T12:03:56.619072000Z 
2021-07-14T12:03:56.619178500Z     matched                            28,529  
2021-07-14T12:03:56.619193600Z     -----------------------------------------
2021-07-14T12:03:56.619199900Z 
2021-07-14T12:03:56.619204400Z . 
2021-07-14T12:03:56.619208100Z . lab define   kids_cat4 0 none  1 "only <12 years" ///
2021-07-14T12:03:56.619211600Z > 2 "only 12-18" ///
2021-07-14T12:03:56.619214700Z > 3 "mixed"
2021-07-14T12:03:56.619406000Z 
2021-07-14T12:03:56.619417000Z . lab val kids_cat4 kids_cat4
2021-07-14T12:03:56.619420800Z 
2021-07-14T12:03:56.619423600Z . recode kids_cat4 .=0
2021-07-14T12:03:56.633897800Z (kids_cat4: 601 changes made)
2021-07-14T12:03:56.636343300Z 
2021-07-14T12:03:56.636357500Z . tab kids_cat4
2021-07-14T12:03:56.639545900Z 
2021-07-14T12:03:56.639562400Z      kids_cat4 |      Freq.     Percent        Cum.
2021-07-14T12:03:56.639567300Z ---------------+-----------------------------------
2021-07-14T12:03:56.639570200Z           none |        601        2.06        2.06
2021-07-14T12:03:56.639572800Z only <12 years |      2,831        9.72       11.78
2021-07-14T12:03:56.639575700Z     only 12-18 |        650        2.23       14.01
2021-07-14T12:03:56.639578600Z          mixed |     25,048       85.99      100.00
2021-07-14T12:03:56.639581200Z ---------------+-----------------------------------
2021-07-14T12:03:56.639583800Z          Total |     29,130      100.00
2021-07-14T12:03:56.639586500Z 
2021-07-14T12:03:56.639589000Z . 
2021-07-14T12:03:56.639591500Z . *Dose-response exposure
2021-07-14T12:03:56.639594200Z . bysort household_id: egen number_kids=sum(nokids) if kids_cat4==1
2021-07-14T12:03:56.700007000Z (26299 missing values generated)
2021-07-14T12:03:56.708773500Z 
2021-07-14T12:03:56.708810700Z . 
2021-07-14T12:03:56.708816700Z . gen gp_number_kids=number_kids
2021-07-14T12:03:56.710534500Z (26,299 missing values generated)
2021-07-14T12:03:56.710565400Z 
2021-07-14T12:03:56.710575600Z . recode gp_number_kids 4/max=4
2021-07-14T12:03:56.730473400Z (gp_number_kids: 1070 changes made)
2021-07-14T12:03:56.732772000Z 
2021-07-14T12:03:56.732803200Z . 
2021-07-14T12:03:56.732809500Z . lab var gp_number_kids "Number kids under 12 years in hh"
2021-07-14T12:03:56.732987700Z 
2021-07-14T12:03:56.733004000Z . lab define   gp_number_kids 0 none ///
2021-07-14T12:03:56.733010800Z > 1 "1 child <12" ///
2021-07-14T12:03:56.733016300Z > 2 "2 children <12" ///
2021-07-14T12:03:56.733021400Z > 3 "3 children <12" ///
2021-07-14T12:03:56.733026500Z > 4 "4+ children <12"
2021-07-14T12:03:56.733031700Z 
2021-07-14T12:03:56.733036500Z . lab val gp_number_kids gp_number_kids
2021-07-14T12:03:56.733256100Z 
2021-07-14T12:03:56.733269000Z . 
2021-07-14T12:03:56.733291900Z . tab kids_cat4 
2021-07-14T12:03:56.736580200Z 
2021-07-14T12:03:56.736592900Z      kids_cat4 |      Freq.     Percent        Cum.
2021-07-14T12:03:56.736612000Z ---------------+-----------------------------------
2021-07-14T12:03:56.736618400Z           none |        601        2.06        2.06
2021-07-14T12:03:56.736623100Z only <12 years |      2,831        9.72       11.78
2021-07-14T12:03:56.736628000Z     only 12-18 |        650        2.23       14.01
2021-07-14T12:03:56.736632800Z          mixed |     25,048       85.99      100.00
2021-07-14T12:03:56.736637400Z ---------------+-----------------------------------
2021-07-14T12:03:56.736642100Z          Total |     29,130      100.00
2021-07-14T12:03:56.736645200Z 
2021-07-14T12:03:56.736648000Z . tab kids_cat5
2021-07-14T12:03:56.740338700Z 
2021-07-14T12:03:56.740351500Z     kids_cat5 |      Freq.     Percent        Cum.
2021-07-14T12:03:56.740356400Z --------------+-----------------------------------
2021-07-14T12:03:56.740360600Z          none |        601        2.06        2.06
2021-07-14T12:03:56.740364800Z only <5 years |        445        1.53        3.59
2021-07-14T12:03:56.740369000Z     only 5-11 |        668        2.29        5.88
2021-07-14T12:03:56.740373200Z        12-<18 |        650        2.23        8.12
2021-07-14T12:03:56.740377500Z         mixed |     26,766       91.88      100.00
2021-07-14T12:03:56.740381600Z --------------+-----------------------------------
2021-07-14T12:03:56.740386000Z         Total |     29,130      100.00
2021-07-14T12:03:56.740390000Z 
2021-07-14T12:03:56.740394500Z . tab kids_cat*
2021-07-14T12:03:56.745995300Z 
2021-07-14T12:03:56.746017100Z               |                  kids_cat4
2021-07-14T12:03:56.746023900Z     kids_cat5 |      none  only <12   only 12-1      mixed |     Total
2021-07-14T12:03:56.746028500Z --------------+--------------------------------------------+----------
2021-07-14T12:03:56.746031400Z          none |       601          0          0          0 |       601 
2021-07-14T12:03:56.746034300Z only <5 years |         0        445          0          0 |       445 
2021-07-14T12:03:56.746037500Z     only 5-11 |         0        668          0          0 |       668 
2021-07-14T12:03:56.746040400Z        12-<18 |         0          0        650          0 |       650 
2021-07-14T12:03:56.746043300Z         mixed |         0      1,718          0     25,048 |    26,766 
2021-07-14T12:03:56.746046200Z --------------+--------------------------------------------+----------
2021-07-14T12:03:56.746049000Z         Total |       601      2,831        650     25,048 |    29,130 
2021-07-14T12:03:56.746051900Z 
2021-07-14T12:03:56.746054500Z . 
2021-07-14T12:03:56.746057200Z . /* DROP ALL KIDS, AS HH COMPOSITION VARS ARE NOW MADE */
2021-07-14T12:03:56.746060200Z . drop if age<18
2021-07-14T12:03:56.754351000Z (6,136 observations deleted)
2021-07-14T12:03:56.754373100Z 
2021-07-14T12:03:56.754378400Z . 
2021-07-14T12:03:56.754382600Z . *Total number adults in household (to check hh size)
2021-07-14T12:03:56.754387100Z . bysort household_id: gen tot_adults_hh=_N
2021-07-14T12:03:56.758113400Z 
2021-07-14T12:03:56.758130100Z . recode tot_adults_hh 3/max=3
2021-07-14T12:03:56.771856800Z (tot_adults_hh: 22549 changes made)
2021-07-14T12:03:56.773231600Z 
2021-07-14T12:03:56.773244900Z . 
2021-07-14T12:03:56.773249300Z . tab kids_cat4
2021-07-14T12:03:56.775321800Z 
2021-07-14T12:03:56.775337400Z      kids_cat4 |      Freq.     Percent        Cum.
2021-07-14T12:03:56.775343700Z ---------------+-----------------------------------
2021-07-14T12:03:56.775348600Z           none |        601        2.61        2.61
2021-07-14T12:03:56.775353100Z only <12 years |      2,295        9.98       12.59
2021-07-14T12:03:56.775358300Z     only 12-18 |        535        2.33       14.92
2021-07-14T12:03:56.775361400Z          mixed |     19,563       85.08      100.00
2021-07-14T12:03:56.775364200Z ---------------+-----------------------------------
2021-07-14T12:03:56.775367100Z          Total |     22,994      100.00
2021-07-14T12:03:56.775369900Z 
2021-07-14T12:03:56.775372600Z . tab gp_num if kids_cat4==1
2021-07-14T12:03:56.776838900Z 
2021-07-14T12:03:56.776852500Z     Number kids |
2021-07-14T12:03:56.776857900Z  under 12 years |
2021-07-14T12:03:56.776862300Z           in hh |      Freq.     Percent        Cum.
2021-07-14T12:03:56.776866900Z ----------------+-----------------------------------
2021-07-14T12:03:56.776871500Z     1 child <12 |        508       22.14       22.14
2021-07-14T12:03:56.776876700Z  2 children <12 |        399       17.39       39.52
2021-07-14T12:03:56.776881300Z  3 children <12 |        215        9.37       48.89
2021-07-14T12:03:56.776885700Z 4+ children <12 |      1,173       51.11      100.00
2021-07-14T12:03:56.776890300Z ----------------+-----------------------------------
2021-07-14T12:03:56.776895500Z           Total |      2,295      100.00
2021-07-14T12:03:56.776899600Z 
2021-07-14T12:03:56.776903800Z . 
2021-07-14T12:03:56.776908100Z . 
2021-07-14T12:03:56.776912600Z . /* SET FU DATES==============================================================
2021-07-14T12:03:56.776916000Z > =*/
2021-07-14T12:03:56.776919700Z . * Censoring dates for each outcome (largely, last date outcome data available
2021-07-14T12:03:56.776924200Z > )
2021-07-14T12:03:56.776942300Z . *****NEEDS UPDATING WHEN INFO AVAILABLE*******************
2021-07-14T12:03:56.776945900Z . global tpp_infec_censor                 = "01/02/2020"
2021-07-14T12:03:56.776949900Z 
2021-07-14T12:03:56.776953700Z . 
2021-07-14T12:03:56.776958200Z . *Start dates
2021-07-14T12:03:56.776962700Z . global indexdate                            = "01/02/2019"
2021-07-14T12:03:56.776967500Z 
2021-07-14T12:03:56.776970100Z . 
2021-07-14T12:03:56.776973100Z . 
2021-07-14T12:03:56.776975600Z . * Some names too long for loops below, shorten
2021-07-14T12:03:56.776978300Z . rename permanent_immunodeficiency_date  perm_immunodef_date
2021-07-14T12:03:56.777134200Z 
2021-07-14T12:03:56.777147500Z . rename temporary_immunodeficiency_date  temp_immunodef_date
2021-07-14T12:03:56.777153500Z 
2021-07-14T12:03:56.777157500Z . rename bmi_date_measured_date                   bmi_measured_date
2021-07-14T12:03:56.777363400Z 
2021-07-14T12:03:56.777375100Z . rename dereg_date_date                                          dereg_date
2021-07-14T12:03:56.777599400Z 
2021-07-14T12:03:56.777615100Z . 
2021-07-14T12:03:56.777621700Z . /* CREATE BINARY VARIABLES===================================================
2021-07-14T12:03:56.777627100Z > =*/
2021-07-14T12:03:56.777632300Z . *  Make indicator variables for all conditions where relevant
2021-07-14T12:03:56.777637700Z . 
2021-07-14T12:03:56.777642400Z . foreach var of varlist  chronic_respiratory_disease ///
2021-07-14T12:03:56.777647500Z >                                                 chronic_cardiac_disease  ///
2021-07-14T12:03:56.777652500Z >                                                 diabetes_date  ///
2021-07-14T12:03:56.777657500Z >                                                 cancer_haem  ///
2021-07-14T12:03:56.777662500Z >                                                 cancer_nonhaem  ///
2021-07-14T12:03:56.777667500Z >                                                 perm_immunodef  ///
2021-07-14T12:03:56.777672700Z >                                                 temp_immunodef  ///
2021-07-14T12:03:56.777677800Z >                                                 dialysis                     
2021-07-14T12:03:56.777683000Z >                    ///
2021-07-14T12:03:56.777687900Z >                                                 kidney_transplant            
2021-07-14T12:03:56.777693100Z >            ///
2021-07-14T12:03:56.777697800Z >                                                 other_transplant             
2021-07-14T12:03:56.777702800Z >            ///                     ///
2021-07-14T12:03:56.777707500Z >                                                 asplenia                     
2021-07-14T12:03:56.777721700Z >    ///
2021-07-14T12:03:56.777727200Z >                                                 chronic_liver_disease  ///
2021-07-14T12:03:56.777732400Z >                                                 other_neuro  ///
2021-07-14T12:03:56.777737500Z >                                                 stroke_dementia              
2021-07-14T12:03:56.777742700Z >            ///
2021-07-14T12:03:56.777747300Z >                                                 esrf  ///
2021-07-14T12:03:56.777751900Z >                                                 hypertension  ///
2021-07-14T12:03:56.777757300Z >                                                 ra_sle_psoriasis  ///
2021-07-14T12:03:56.777762300Z >                                                 bmi_measured_date   ///
2021-07-14T12:03:56.777767600Z >                                                 bp_sys_date_measured   ///
2021-07-14T12:03:56.777772700Z >                                                 bp_dias_date_measured   ///
2021-07-14T12:03:56.777777900Z >                                                 creatinine_date  ///
2021-07-14T12:03:56.777782900Z >                                                 smoking_status_date ///
2021-07-14T12:03:56.777787800Z >                                                 {
2021-07-14T12:03:56.777792600Z   2. 
2021-07-14T12:03:56.777801100Z .         /* date ranges are applied in python, so presence of date indicates p
2021-07-14T12:03:56.777806600Z > resence of
2021-07-14T12:03:56.777811600Z >           disease in the correct time frame */
2021-07-14T12:03:56.777816600Z .         local newvar =  substr("`var'", 1, length("`var'") - 5)
2021-07-14T12:03:56.777822000Z   3.         gen `newvar' = (`var'!=. )
2021-07-14T12:03:56.777827000Z   4.         order `newvar', after(`var')
2021-07-14T12:03:56.777831800Z   5. 
2021-07-14T12:03:56.777836300Z . }
2021-07-14T12:03:56.848514600Z 
2021-07-14T12:03:56.848536900Z . 
2021-07-14T12:03:56.848541600Z . 
2021-07-14T12:03:56.848544600Z . 
2021-07-14T12:03:56.848564900Z . 
2021-07-14T12:03:56.848571100Z . /*  Body Mass Index  */
2021-07-14T12:03:56.848574600Z . * NB: watch for missingness
2021-07-14T12:03:56.848577600Z . 
2021-07-14T12:03:56.848580500Z . * Recode strange values
2021-07-14T12:03:56.848583500Z . replace bmi = . if bmi == 0
2021-07-14T12:03:56.850567700Z (1,143 real changes made, 1,143 to missing)
2021-07-14T12:03:56.850583100Z 
2021-07-14T12:03:56.850587200Z . replace bmi = . if !inrange(bmi, 15, 50)
2021-07-14T12:03:56.852818700Z (1,904 real changes made, 1,904 to missing)
2021-07-14T12:03:56.852861100Z 
2021-07-14T12:03:56.852868200Z . 
2021-07-14T12:03:56.852871500Z . * Restrict to within 10 years of index and aged > 16
2021-07-14T12:03:56.852875100Z . gen bmi_time = (date("$indexdate", "DMY") - bmi_measured_date)/365.25
2021-07-14T12:03:56.874641000Z (1,143 missing values generated)
2021-07-14T12:03:56.874659500Z 
2021-07-14T12:03:56.874664400Z . gen bmi_age = age - bmi_time
2021-07-14T12:03:56.877672000Z (1,143 missing values generated)
2021-07-14T12:03:56.877688200Z 
2021-07-14T12:03:56.877693000Z . 
2021-07-14T12:03:56.877696900Z . replace bmi = . if bmi_age < 16
2021-07-14T12:03:56.880574700Z (7,153 real changes made, 7,153 to missing)
2021-07-14T12:03:56.880591200Z 
2021-07-14T12:03:56.880595900Z . replace bmi = . if bmi_time > 10 & bmi_time != .
2021-07-14T12:03:56.885247700Z (8,229 real changes made, 8,229 to missing)
2021-07-14T12:03:56.885266800Z 
2021-07-14T12:03:56.885271500Z . 
2021-07-14T12:03:56.885275200Z . * Set to missing if no date, and vice versa
2021-07-14T12:03:56.885279000Z . replace bmi = . if bmi_measured_date == .
2021-07-14T12:03:56.887410200Z (0 real changes made)
2021-07-14T12:03:56.887426100Z 
2021-07-14T12:03:56.887432500Z . replace bmi_measured_date = . if bmi == .
2021-07-14T12:03:56.891598300Z (17,286 real changes made, 17,286 to missing)
2021-07-14T12:03:56.891643000Z 
2021-07-14T12:03:56.891652300Z . replace bmi_measured = . if bmi == .
2021-07-14T12:03:56.894689200Z (18,429 real changes made, 18,429 to missing)
2021-07-14T12:03:56.894700400Z 
2021-07-14T12:03:56.894703500Z . 
2021-07-14T12:03:56.894706100Z . gen     bmicat = .
2021-07-14T12:03:56.895524200Z (22,994 missing values generated)
2021-07-14T12:03:56.895535800Z 
2021-07-14T12:03:56.895539000Z . recode  bmicat . = 1 if bmi < 18.5
2021-07-14T12:03:56.906616300Z (bmicat: 126 changes made)
2021-07-14T12:03:56.908127600Z 
2021-07-14T12:03:56.908139200Z . recode  bmicat . = 2 if bmi < 25
2021-07-14T12:03:56.919640000Z (bmicat: 566 changes made)
2021-07-14T12:03:56.921100700Z 
2021-07-14T12:03:56.921115500Z . recode  bmicat . = 3 if bmi < 30
2021-07-14T12:03:56.931707100Z (bmicat: 776 changes made)
2021-07-14T12:03:56.932948800Z 
2021-07-14T12:03:56.932976700Z . recode  bmicat . = 4 if bmi < 35
2021-07-14T12:03:56.943577300Z (bmicat: 943 changes made)
2021-07-14T12:03:56.944879500Z 
2021-07-14T12:03:56.944892500Z . recode  bmicat . = 5 if bmi < 40
2021-07-14T12:03:56.956662900Z (bmicat: 973 changes made)
2021-07-14T12:03:56.958288800Z 
2021-07-14T12:03:56.958302300Z . recode  bmicat . = 6 if bmi < .
2021-07-14T12:03:56.972029300Z (bmicat: 1181 changes made)
2021-07-14T12:03:56.973513000Z 
2021-07-14T12:03:56.973524200Z . replace bmicat = .u if bmi >= .
2021-07-14T12:03:56.976770900Z (18,429 real changes made, 18,429 to missing)
2021-07-14T12:03:56.976800000Z 
2021-07-14T12:03:56.976806500Z . 
2021-07-14T12:03:56.976811600Z . label define bmicat 1 "Underweight (<18.5)"     ///
2021-07-14T12:03:56.976817000Z >                                         2 "Normal (18.5-24.9)"          ///
2021-07-14T12:03:56.976822000Z >                                         3 "Overweight (25-29.9)"        ///
2021-07-14T12:03:56.976827100Z >                                         4 "Obese I (30-34.9)"           ///
2021-07-14T12:03:56.976832200Z >                                         5 "Obese II (35-39.9)"          ///
2021-07-14T12:03:56.976837200Z >                                         6 "Obese III (40+)"                  
2021-07-14T12:03:56.976842400Z >    ///
2021-07-14T12:03:56.976846900Z >                                         .u "Unknown (.u)"
2021-07-14T12:03:56.976958900Z 
2021-07-14T12:03:56.976975100Z . 
2021-07-14T12:03:56.976978900Z . label values bmicat bmicat
2021-07-14T12:03:56.976982000Z 
2021-07-14T12:03:56.976984600Z . 
2021-07-14T12:03:56.976988700Z . * Create less  granular categorisation
2021-07-14T12:03:56.976991700Z . recode bmicat 1/3 .u = 1 4 = 2 5 = 3 6 = 4, gen(obese4cat)
2021-07-14T12:03:57.021632900Z (22868 differences between bmicat and obese4cat)
2021-07-14T12:03:57.026692400Z 
2021-07-14T12:03:57.026710500Z . 
2021-07-14T12:03:57.026724000Z . label define obese4cat  1 "No record of obesity"        ///
2021-07-14T12:03:57.026729800Z >                                                 2 "Obese I (30-34.9)"        
2021-07-14T12:03:57.026734800Z >    ///
2021-07-14T12:03:57.026739100Z >                                                 3 "Obese II (35-39.9)"       
2021-07-14T12:03:57.026744200Z >    ///
2021-07-14T12:03:57.026748600Z >                                                 4 "Obese III (40+)"
2021-07-14T12:03:57.026753500Z 
2021-07-14T12:03:57.026758000Z . 
2021-07-14T12:03:57.026762400Z . label values obese4cat obese4cat
2021-07-14T12:03:57.026784700Z 
2021-07-14T12:03:57.026798700Z . order obese4cat, after(bmicat)
2021-07-14T12:03:57.027775800Z 
2021-07-14T12:03:57.027790400Z . 
2021-07-14T12:03:57.027794200Z . 
2021-07-14T12:03:57.027808900Z . /*  Smoking  */
2021-07-14T12:03:57.027813700Z . 
2021-07-14T12:03:57.027817700Z . * Smoking
2021-07-14T12:03:57.027821700Z . label define smoke 1 "Never" 2 "Former" 3 "Current" .u "Unknown (.u)"
2021-07-14T12:03:57.027826700Z 
2021-07-14T12:03:57.027830800Z . 
2021-07-14T12:03:57.027834800Z . gen     smoke = 1  if smoking_status == "N"
2021-07-14T12:03:57.031465200Z (22,077 missing values generated)
2021-07-14T12:03:57.031477800Z 
2021-07-14T12:03:57.031481300Z . replace smoke = 2  if smoking_status == "E"
2021-07-14T12:03:57.034870300Z (480 real changes made)
2021-07-14T12:03:57.034887200Z 
2021-07-14T12:03:57.034891000Z . replace smoke = 3  if smoking_status == "S"
2021-07-14T12:03:57.037146600Z (2,768 real changes made)
2021-07-14T12:03:57.037159500Z 
2021-07-14T12:03:57.037163400Z . replace smoke = .u if smoking_status == "M"
2021-07-14T12:03:57.039248400Z (452 real changes made, 452 to missing)
2021-07-14T12:03:57.039264800Z 
2021-07-14T12:03:57.039269000Z . replace smoke = .u if smoking_status == ""
2021-07-14T12:03:57.042565700Z (18,377 real changes made, 18,377 to missing)
2021-07-14T12:03:57.042582900Z 
2021-07-14T12:03:57.042588600Z . 
2021-07-14T12:03:57.042592900Z . label values smoke smoke
2021-07-14T12:03:57.042597100Z 
2021-07-14T12:03:57.042601300Z . drop smoking_status
2021-07-14T12:03:57.044571500Z 
2021-07-14T12:03:57.044589300Z . 
2021-07-14T12:03:57.044594800Z . * Create non-missing 3-category variable for current smoking
2021-07-14T12:03:57.044599700Z . * Assumes missing smoking is never smoking
2021-07-14T12:03:57.044604200Z . recode smoke .u = 1, gen(smoke_nomiss)
2021-07-14T12:03:57.061977900Z (18829 differences between smoke and smoke_nomiss)
2021-07-14T12:03:57.072161400Z 
2021-07-14T12:03:57.072182900Z . order smoke_nomiss, after(smoke)
2021-07-14T12:03:57.072837000Z 
2021-07-14T12:03:57.072852700Z . label values smoke_nomiss smoke
2021-07-14T12:03:57.072856800Z 
2021-07-14T12:03:57.072859700Z . 
2021-07-14T12:03:57.072862600Z . /* CLINICAL COMORBIDITIES */
2021-07-14T12:03:57.072865400Z . 
2021-07-14T12:03:57.072868400Z . /*  Cancer */
2021-07-14T12:03:57.072871500Z . label define cancer 1 "Never" 2 "Last year" 3 "2-5 years ago" 4 "5+ years"
2021-07-14T12:03:57.073089600Z 
2021-07-14T12:03:57.073103600Z . 
2021-07-14T12:03:57.073108900Z . * Haematological malignancies
2021-07-14T12:03:57.073113400Z . gen     cancer_haem_cat = 4 if inrange(cancer_haem_date, d(1/1/1900), d(1/2/2
2021-07-14T12:03:57.073161500Z > 015))
2021-07-14T12:03:57.076006700Z (18,761 missing values generated)
2021-07-14T12:03:57.076019200Z 
2021-07-14T12:03:57.076022900Z . replace cancer_haem_cat = 3 if inrange(cancer_haem_date, d(1/2/2015), d(1/2/2
2021-07-14T12:03:57.076026100Z > 019))
2021-07-14T12:03:57.079011000Z (384 real changes made)
2021-07-14T12:03:57.079023200Z 
2021-07-14T12:03:57.079028600Z . replace cancer_haem_cat = 2 if inrange(cancer_haem_date, d(1/2/2019), d(1/2/2
2021-07-14T12:03:57.079034200Z > 020))
2021-07-14T12:03:57.081273200Z (0 real changes made)
2021-07-14T12:03:57.081288800Z 
2021-07-14T12:03:57.081293000Z . recode  cancer_haem_cat . = 1
2021-07-14T12:03:57.101048400Z (cancer_haem_cat: 18377 changes made)
2021-07-14T12:03:57.103285900Z 
2021-07-14T12:03:57.103299600Z . label values cancer_haem_cat cancer
2021-07-14T12:03:57.103303000Z 
2021-07-14T12:03:57.103326100Z . 
2021-07-14T12:03:57.103334000Z . 
2021-07-14T12:03:57.103337400Z . * All other cancers
2021-07-14T12:03:57.103340300Z . gen     cancer_exhaem_cat = 4 if inrange(cancer_nonhaem_date,  d(1/1/1900), d
2021-07-14T12:03:57.103343400Z > (1/2/2015))
2021-07-14T12:03:57.106950800Z (18,818 missing values generated)
2021-07-14T12:03:57.106964100Z 
2021-07-14T12:03:57.106969600Z . replace cancer_exhaem_cat = 3 if inrange(cancer_nonhaem_date,  d(1/2/2015), d
2021-07-14T12:03:57.106974700Z > (1/2/2019))
2021-07-14T12:03:57.110519600Z (426 real changes made)
2021-07-14T12:03:57.110529400Z 
2021-07-14T12:03:57.110547800Z . replace cancer_exhaem_cat = 2 if inrange(cancer_nonhaem_date,  d(1/2/2019), d
2021-07-14T12:03:57.110550800Z > (1/2/2020))
2021-07-14T12:03:57.112816900Z (0 real changes made)
2021-07-14T12:03:57.112847500Z 
2021-07-14T12:03:57.112853100Z . recode  cancer_exhaem_cat . = 1
2021-07-14T12:03:57.133827900Z (cancer_exhaem_cat: 18392 changes made)
2021-07-14T12:03:57.137085400Z 
2021-07-14T12:03:57.137141200Z . label values cancer_exhaem_cat cancer
2021-07-14T12:03:57.137375000Z 
2021-07-14T12:03:57.137387600Z . 
2021-07-14T12:03:57.137391200Z . 
2021-07-14T12:03:57.137393800Z . /*  Immunosuppression  */
2021-07-14T12:03:57.137396500Z . 
2021-07-14T12:03:57.137399000Z . * Immunosuppressed:
2021-07-14T12:03:57.137401800Z . * Permanent immunodeficiency ever, OR
2021-07-14T12:03:57.137404500Z . * Temporary immunodeficiency  last year
2021-07-14T12:03:57.137416900Z . gen temp1  = 1 if perm_immunodef_date!=.
2021-07-14T12:03:57.140004800Z (18,392 missing values generated)
2021-07-14T12:03:57.140017000Z 
2021-07-14T12:03:57.140020700Z . gen temp2  = inrange(temp_immunodef_date, (date("$indexdate", "DMY") - 365), 
2021-07-14T12:03:57.140024200Z > date("$indexdate", "DMY"))
2021-07-14T12:03:57.166986000Z 
2021-07-14T12:03:57.167019100Z . 
2021-07-14T12:03:57.167022900Z . egen other_immuno = rowmax(temp1 temp2)
2021-07-14T12:03:57.174833600Z 
2021-07-14T12:03:57.174852400Z . drop temp1 temp2
2021-07-14T12:03:57.175460400Z 
2021-07-14T12:03:57.175477500Z . order other_immuno, after(temp_immunodef)
2021-07-14T12:03:57.177503200Z 
2021-07-14T12:03:57.177517800Z . 
2021-07-14T12:03:57.177521700Z . /*  Blood pressure   */
2021-07-14T12:03:57.177524800Z . 
2021-07-14T12:03:57.177527700Z . * Categorise
2021-07-14T12:03:57.177531700Z . gen     bpcat = 1 if bp_sys < 120 &  bp_dias < 80
2021-07-14T12:03:57.180791900Z (21,836 missing values generated)
2021-07-14T12:03:57.180809100Z 
2021-07-14T12:03:57.180815100Z . replace bpcat = 2 if inrange(bp_sys, 120, 130) & bp_dias<80
2021-07-14T12:03:57.184365600Z (0 real changes made)
2021-07-14T12:03:57.184385400Z 
2021-07-14T12:03:57.184390500Z . replace bpcat = 3 if inrange(bp_sys, 130, 140) | inrange(bp_dias, 80, 90)
2021-07-14T12:03:57.187790200Z (27 real changes made)
2021-07-14T12:03:57.187820000Z 
2021-07-14T12:03:57.187826700Z . replace bpcat = 4 if (bp_sys>=140 & bp_sys<.) | (bp_dias>=90 & bp_dias<.)
2021-07-14T12:03:57.193856800Z (21,809 real changes made)
2021-07-14T12:03:57.193881500Z 
2021-07-14T12:03:57.193887100Z . replace bpcat = .u if bp_sys>=. | bp_dias>=. | bp_sys==0 | bp_dias==0
2021-07-14T12:03:57.199445200Z (2,269 real changes made, 2,269 to missing)
2021-07-14T12:03:57.199481100Z 
2021-07-14T12:03:57.199486900Z . 
2021-07-14T12:03:57.199491600Z . label define bpcat 1 "Normal" 2 "Elevated" 3 "High, stage I"    ///
2021-07-14T12:03:57.199496600Z >                                         4 "High, stage II" .u "Unknown"
2021-07-14T12:03:57.199501700Z 
2021-07-14T12:03:57.199505700Z . label values bpcat bpcat
2021-07-14T12:03:57.199707900Z 
2021-07-14T12:03:57.199718700Z . 
2021-07-14T12:03:57.199721500Z . recode bpcat .u=1, gen(bpcat_nomiss)
2021-07-14T12:03:57.213900100Z (2269 differences between bpcat and bpcat_nomiss)
2021-07-14T12:03:57.220939500Z 
2021-07-14T12:03:57.220958300Z . label values bpcat_nomiss bpcat
2021-07-14T12:03:57.220977000Z 
2021-07-14T12:03:57.220982500Z . 
2021-07-14T12:03:57.220987100Z . * Create non-missing indicator of known high blood pressure
2021-07-14T12:03:57.221069600Z . gen bphigh = (bpcat==4)
2021-07-14T12:03:57.222872000Z 
2021-07-14T12:03:57.222889600Z . 
2021-07-14T12:03:57.222895600Z . /*  Hypertension  */
2021-07-14T12:03:57.222900100Z . 
2021-07-14T12:03:57.222904200Z . gen htdiag_or_highbp = bphigh
2021-07-14T12:03:57.224919700Z 
2021-07-14T12:03:57.224935400Z . recode htdiag_or_highbp 0 = 1 if hypertension==1
2021-07-14T12:03:57.243634700Z (htdiag_or_highbp: 428 changes made)
2021-07-14T12:03:57.246259900Z 
2021-07-14T12:03:57.246277900Z . 
2021-07-14T12:03:57.246282600Z . 
2021-07-14T12:03:57.246285600Z . ************
2021-07-14T12:03:57.246302800Z . *   eGFR   *
2021-07-14T12:03:57.246305100Z . ************
2021-07-14T12:03:57.246307600Z . 
2021-07-14T12:03:57.246329300Z . * Set implausible creatinine values to missing (Note: zero changed to missing
2021-07-14T12:03:57.246332500Z > )
2021-07-14T12:03:57.246335500Z . replace creatinine = . if !inrange(creatinine, 20, 3000)
2021-07-14T12:03:57.249621300Z (1,238 real changes made, 1,238 to missing)
2021-07-14T12:03:57.249641700Z 
2021-07-14T12:03:57.249646700Z . 
2021-07-14T12:03:57.249649900Z . * Divide by 88.4 (to convert umol/l to mg/dl)
2021-07-14T12:03:57.249653000Z . gen SCr_adj = creatinine/88.4
2021-07-14T12:03:57.252910900Z (1,238 missing values generated)
2021-07-14T12:03:57.252952200Z 
2021-07-14T12:03:57.252958700Z . 
2021-07-14T12:03:57.252963900Z . gen min=.
2021-07-14T12:03:57.253971800Z (22,994 missing values generated)
2021-07-14T12:03:57.253986000Z 
2021-07-14T12:03:57.253989800Z . replace min = SCr_adj/0.7 if male==0
2021-07-14T12:03:57.257957700Z (11,117 real changes made)
2021-07-14T12:03:57.257971500Z 
2021-07-14T12:03:57.257975600Z . replace min = SCr_adj/0.9 if male==1
2021-07-14T12:03:57.261932800Z (10,639 real changes made)
2021-07-14T12:03:57.261969500Z 
2021-07-14T12:03:57.261976000Z . replace min = min^-0.329  if male==0
2021-07-14T12:03:57.266287400Z (11,117 real changes made)
2021-07-14T12:03:57.266303600Z 
2021-07-14T12:03:57.266309500Z . replace min = min^-0.411  if male==1
2021-07-14T12:03:57.270014500Z (10,639 real changes made)
2021-07-14T12:03:57.270030300Z 
2021-07-14T12:03:57.270034000Z . replace min = 1 if min<1
2021-07-14T12:03:57.272472100Z (6,050 real changes made)
2021-07-14T12:03:57.272488200Z 
2021-07-14T12:03:57.272493800Z . 
2021-07-14T12:03:57.272498400Z . gen max=.
2021-07-14T12:03:57.273525500Z (22,994 missing values generated)
2021-07-14T12:03:57.273539800Z 
2021-07-14T12:03:57.273572800Z . replace max=SCr_adj/0.7 if male==0
2021-07-14T12:03:57.277568600Z (11,117 real changes made)
2021-07-14T12:03:57.277603000Z 
2021-07-14T12:03:57.277610100Z . replace max=SCr_adj/0.9 if male==1
2021-07-14T12:03:57.281970200Z (10,639 real changes made)
2021-07-14T12:03:57.281994500Z 
2021-07-14T12:03:57.281998600Z . replace max=max^-1.209
2021-07-14T12:03:57.287293500Z (21,756 real changes made)
2021-07-14T12:03:57.287329100Z 
2021-07-14T12:03:57.287334900Z . replace max=1 if max>1
2021-07-14T12:03:57.291311200Z (16,944 real changes made)
2021-07-14T12:03:57.291326100Z 
2021-07-14T12:03:57.291329700Z . 
2021-07-14T12:03:57.291332600Z . gen egfr=min*max*141
2021-07-14T12:03:57.294655800Z (1,238 missing values generated)
2021-07-14T12:03:57.294674400Z 
2021-07-14T12:03:57.294680100Z . replace egfr=egfr*(0.993^age)
2021-07-14T12:03:57.301518400Z (21,756 real changes made)
2021-07-14T12:03:57.301537200Z 
2021-07-14T12:03:57.301541100Z . replace egfr=egfr*1.018 if male==0
2021-07-14T12:03:57.305841500Z (11,117 real changes made)
2021-07-14T12:03:57.305863300Z 
2021-07-14T12:03:57.305868700Z . label var egfr "egfr calculated using CKD-EPI formula with no eth"
2021-07-14T12:03:57.305873500Z 
2021-07-14T12:03:57.305877600Z . 
2021-07-14T12:03:57.305895400Z . * Categorise into ckd stages
2021-07-14T12:03:57.305899500Z . egen egfr_cat = cut(egfr), at(0, 15, 30, 45, 60, 5000)
2021-07-14T12:03:57.334096800Z (1238 missing values generated)
2021-07-14T12:03:57.335758200Z 
2021-07-14T12:03:57.335773800Z . recode egfr_cat 0=5 15=4 30=3 45=2 60=0, generate(ckd)
2021-07-14T12:03:57.393108000Z (21756 differences between egfr_cat and ckd)
2021-07-14T12:03:57.398699600Z 
2021-07-14T12:03:57.398732200Z . * 0 = "No CKD"  2 "stage 3a" 3 "stage 3b" 4 "stage 4" 5 "stage 5"
2021-07-14T12:03:57.398750600Z . label define ckd 0 "No CKD" 1 "CKD"
2021-07-14T12:03:57.398754800Z 
2021-07-14T12:03:57.398757400Z . label values ckd ckd
2021-07-14T12:03:57.399006300Z 
2021-07-14T12:03:57.399015600Z . *label var ckd "CKD stage calc without eth"
2021-07-14T12:03:57.399018600Z . 
2021-07-14T12:03:57.399031300Z . * Convert into CKD group
2021-07-14T12:03:57.399034100Z . *recode ckd 2/5=1, gen(chronic_kidney_disease)
2021-07-14T12:03:57.399036500Z . *replace chronic_kidney_disease = 0 if creatinine==.
2021-07-14T12:03:57.399039200Z . 
2021-07-14T12:03:57.399041700Z . recode ckd 0=1 2/3=2 4/5=3, gen(reduced_kidney_function_cat)
2021-07-14T12:03:57.421175600Z (21480 differences between ckd and reduced_kidney_function_cat)
2021-07-14T12:03:57.426874700Z 
2021-07-14T12:03:57.426891900Z . replace reduced_kidney_function_cat = 1 if creatinine==.
2021-07-14T12:03:57.428818600Z (1,238 real changes made)
2021-07-14T12:03:57.428831500Z 
2021-07-14T12:03:57.428837200Z . label define reduced_kidney_function_catlab ///
2021-07-14T12:03:57.428841600Z >         1 "None" 2 "Stage 3a/3b egfr 30-60      " 3 "Stage 4/5 egfr<30"
2021-07-14T12:03:57.428846900Z 
2021-07-14T12:03:57.428850400Z . label values reduced_kidney_function_cat reduced_kidney_function_catlab
2021-07-14T12:03:57.429008900Z 
2021-07-14T12:03:57.429017900Z . lab var  reduced "Reduced kidney function"
2021-07-14T12:03:57.429020900Z 
2021-07-14T12:03:57.429023200Z . 
2021-07-14T12:03:57.429025500Z . 
2021-07-14T12:03:57.429027800Z . 
2021-07-14T12:03:57.429030200Z . /*ESDR: dialysis or kidney transplant*/
2021-07-14T12:03:57.429032900Z . gen esrd=1 if dialysis==1 | kidney_transplant==1
2021-07-14T12:03:57.432722800Z (14,648 missing values generated)
2021-07-14T12:03:57.432742500Z 
2021-07-14T12:03:57.432747400Z . recode esrd .=0
2021-07-14T12:03:57.450299200Z (esrd: 14648 changes made)
2021-07-14T12:03:57.453736500Z 
2021-07-14T12:03:57.453762500Z . 
2021-07-14T12:03:57.453769000Z . 
2021-07-14T12:03:57.453774000Z . /* Hb1AC */
2021-07-14T12:03:57.453778900Z . 
2021-07-14T12:03:57.453783700Z . /*  Diabetes severity  */
2021-07-14T12:03:57.453788600Z . 
2021-07-14T12:03:57.453793100Z . * Set zero or negative to missing
2021-07-14T12:03:57.453797600Z . replace hba1c_percentage   = . if hba1c_percentage <= 0
2021-07-14T12:03:57.456381300Z (1,313 real changes made, 1,313 to missing)
2021-07-14T12:03:57.456417900Z 
2021-07-14T12:03:57.456420800Z . replace hba1c_mmol_per_mol = . if hba1c_mmol_per_mol <= 0
2021-07-14T12:03:57.459234300Z (1,605 real changes made, 1,605 to missing)
2021-07-14T12:03:57.459259800Z 
2021-07-14T12:03:57.459265400Z . 
2021-07-14T12:03:57.459269700Z . /* Express  HbA1c as percentage  */
2021-07-14T12:03:57.459273800Z . 
2021-07-14T12:03:57.459277300Z . * Express all values as perecentage
2021-07-14T12:03:57.459304200Z . noi summ hba1c_percentage hba1c_mmol_per_mol
2021-07-14T12:03:57.462817200Z 
2021-07-14T12:03:57.462840900Z     Variable |        Obs        Mean    Std. Dev.       Min        Max
2021-07-14T12:03:57.462847400Z -------------+---------------------------------------------------------
2021-07-14T12:03:57.462852300Z hba1c_per~ge |     21,681    5.045899    1.968788    .007013   12.37769
2021-07-14T12:03:57.465977400Z hba1c_mmol~l |     21,389    41.12016    18.83187    .020931    116.003
2021-07-14T12:03:57.466002600Z 
2021-07-14T12:03:57.466008000Z . gen     hba1c_pct = hba1c_percentage
2021-07-14T12:03:57.467687900Z (1,313 missing values generated)
2021-07-14T12:03:57.467705200Z 
2021-07-14T12:03:57.467709500Z . replace hba1c_pct = (hba1c_mmol_per_mol/10.929)+2.15 if hba1c_mmol_per_mol<.
2021-07-14T12:03:57.471911700Z (21,389 real changes made)
2021-07-14T12:03:57.471934300Z 
2021-07-14T12:03:57.471940500Z . 
2021-07-14T12:03:57.471946900Z . * Valid % range between 0-20  /195 mmol/mol
2021-07-14T12:03:57.471952000Z . replace hba1c_pct = . if !inrange(hba1c_pct, 0, 20)
2021-07-14T12:03:57.474249900Z (0 real changes made)
2021-07-14T12:03:57.474279700Z 
2021-07-14T12:03:57.474284100Z . replace hba1c_pct = round(hba1c_pct, 0.1)
2021-07-14T12:03:57.478994900Z (22,880 real changes made)
2021-07-14T12:03:57.479056800Z 
2021-07-14T12:03:57.479063000Z . 
2021-07-14T12:03:57.479067800Z . 
2021-07-14T12:03:57.479072300Z . /* Categorise hba1c and diabetes  */
2021-07-14T12:03:57.479077100Z . /* Diabetes type */
2021-07-14T12:03:57.479081800Z . gen dm_type=1 if diabetes_type=="T1DM"
2021-07-14T12:03:57.483794500Z (22,277 missing values generated)
2021-07-14T12:03:57.483810900Z 
2021-07-14T12:03:57.483814100Z . replace dm_type=2 if diabetes_type=="T2DM"
2021-07-14T12:03:57.488095300Z (4,608 real changes made)
2021-07-14T12:03:57.488108900Z 
2021-07-14T12:03:57.488111900Z . replace dm_type=3 if diabetes_type=="UNKNOWN_DM"
2021-07-14T12:03:57.493143100Z (455 real changes made)
2021-07-14T12:03:57.493188200Z 
2021-07-14T12:03:57.493193900Z . replace dm_type=0 if diabetes_type=="NO_DM"
2021-07-14T12:03:57.499109800Z (17,214 real changes made)
2021-07-14T12:03:57.499128300Z 
2021-07-14T12:03:57.499133700Z . 
2021-07-14T12:03:57.499138600Z . safetab dm_type diabetes_type
2021-07-14T12:03:57.499854100Z 0
2021-07-14T12:03:57.517691600Z 
2021-07-14T12:03:57.517713200Z            |                diabetes_type
2021-07-14T12:03:57.517731700Z    dm_type |     NO_DM       T1DM       T2DM  UNKNOWN.. |     Total
2021-07-14T12:03:57.517737300Z -----------+--------------------------------------------+----------
2021-07-14T12:03:57.517741500Z          0 |    17,214          0          0          0 |    17,214 
2021-07-14T12:03:57.517745300Z          1 |         0        717          0          0 |       717 
2021-07-14T12:03:57.517749500Z          2 |         0          0      4,608          0 |     4,608 
2021-07-14T12:03:57.517753300Z          3 |         0          0          0        455 |       455 
2021-07-14T12:03:57.517757000Z -----------+--------------------------------------------+----------
2021-07-14T12:03:57.517760900Z      Total |    17,214        717      4,608        455 |    22,994 
2021-07-14T12:03:57.517764900Z 
2021-07-14T12:03:57.517768500Z . label define dm_type 0"No DM" 1"T1DM" 2"T2DM" 3"UNKNOWN_DM"
2021-07-14T12:03:57.517871900Z 
2021-07-14T12:03:57.517886000Z . label values dm_type dm_type
2021-07-14T12:03:57.517890900Z 
2021-07-14T12:03:57.517894700Z . 
2021-07-14T12:03:57.517898400Z . *Open safely diabetes codes with exeter algorithm
2021-07-14T12:03:57.517902300Z . gen dm_type_exeter_os=1 if diabetes_exeter_os=="T1DM_EX_OS"
2021-07-14T12:03:57.522306900Z (22,304 missing values generated)
2021-07-14T12:03:57.522335700Z 
2021-07-14T12:03:57.522344200Z . replace dm_type_exeter_os=2 if diabetes_exeter_os=="T2DM_EX_OS"
2021-07-14T12:03:57.526897200Z (4,578 real changes made)
2021-07-14T12:03:57.526914600Z 
2021-07-14T12:03:57.526920300Z . replace dm_type_exeter_os=0 if diabetes_exeter_os=="NO_DM"
2021-07-14T12:03:57.532112500Z (17,726 real changes made)
2021-07-14T12:03:57.532131500Z 
2021-07-14T12:03:57.532137700Z . label values  dm_type_exeter_os dm_type
2021-07-14T12:03:57.532142200Z 
2021-07-14T12:03:57.532147700Z . 
2021-07-14T12:03:57.532151800Z . * Group hba1c
2021-07-14T12:03:57.532156500Z . gen     hba1ccat = 0 if hba1c_pct <  6.5
2021-07-14T12:03:57.535023300Z (8,383 missing values generated)
2021-07-14T12:03:57.535036300Z 
2021-07-14T12:03:57.535041400Z . replace hba1ccat = 1 if hba1c_pct >= 6.5  & hba1c_pct < 7.5
2021-07-14T12:03:57.538028900Z (4,021 real changes made)
2021-07-14T12:03:57.538040800Z 
2021-07-14T12:03:57.538043700Z . replace hba1ccat = 2 if hba1c_pct >= 7.5  & hba1c_pct < 8
2021-07-14T12:03:57.541306300Z (1,450 real changes made)
2021-07-14T12:03:57.541328000Z 
2021-07-14T12:03:57.541333700Z . replace hba1ccat = 3 if hba1c_pct >= 8    & hba1c_pct < 9
2021-07-14T12:03:57.545075000Z (1,810 real changes made)
2021-07-14T12:03:57.545111900Z 
2021-07-14T12:03:57.545118500Z . replace hba1ccat = 4 if hba1c_pct >= 9    & hba1c_pct !=.
2021-07-14T12:03:57.548584300Z (988 real changes made)
2021-07-14T12:03:57.548600600Z 
2021-07-14T12:03:57.548603900Z . label define hba1ccat 0 "<6.5%" 1">=6.5-7.4" 2">=7.5-7.9" 3">=8-8.9" 4">=9"
2021-07-14T12:03:57.548607500Z 
2021-07-14T12:03:57.548609900Z . label values hba1ccat hba1ccat
2021-07-14T12:03:57.548830900Z 
2021-07-14T12:03:57.548852600Z . safetab hba1ccat
2021-07-14T12:03:57.549480600Z 0
2021-07-14T12:03:57.556675600Z 
2021-07-14T12:03:57.556696300Z    hba1ccat |      Freq.     Percent        Cum.
2021-07-14T12:03:57.556702200Z ------------+-----------------------------------
2021-07-14T12:03:57.556706700Z       <6.5% |     14,611       63.86       63.86
2021-07-14T12:03:57.556711300Z   >=6.5-7.4 |      4,021       17.57       81.43
2021-07-14T12:03:57.556715800Z   >=7.5-7.9 |      1,450        6.34       87.77
2021-07-14T12:03:57.556720600Z     >=8-8.9 |      1,810        7.91       95.68
2021-07-14T12:03:57.556725700Z         >=9 |        988        4.32      100.00
2021-07-14T12:03:57.556729900Z ------------+-----------------------------------
2021-07-14T12:03:57.556733700Z       Total |     22,880      100.00
2021-07-14T12:03:57.556737900Z 
2021-07-14T12:03:57.556743900Z . 
2021-07-14T12:03:57.556747600Z . gen hba1c75=0 if hba1c_pct<7.5
2021-07-14T12:03:57.559374800Z (4,362 missing values generated)
2021-07-14T12:03:57.559391700Z 
2021-07-14T12:03:57.559397500Z . replace hba1c75=1 if hba1c_pct>=7.5 & hba1c_pct!=.
2021-07-14T12:03:57.563620600Z (4,248 real changes made)
2021-07-14T12:03:57.563641000Z 
2021-07-14T12:03:57.563646600Z . label define hba1c75 0"<7.5" 1">=7.5"
2021-07-14T12:03:57.563748200Z 
2021-07-14T12:03:57.563760700Z . safetab hba1c75, m
2021-07-14T12:03:57.564610300Z 8
2021-07-14T12:03:57.574222400Z 
2021-07-14T12:03:57.574256800Z     hba1c75 |      Freq.     Percent        Cum.
2021-07-14T12:03:57.574261900Z ------------+-----------------------------------
2021-07-14T12:03:57.574273200Z           0 |     18,632       81.03       81.03
2021-07-14T12:03:57.574277500Z           1 |      4,248       18.47       99.50
2021-07-14T12:03:57.574281500Z           . |        114        0.50      100.00
2021-07-14T12:03:57.574285600Z ------------+-----------------------------------
2021-07-14T12:03:57.574289500Z       Total |     22,994      100.00
2021-07-14T12:03:57.574293300Z 
2021-07-14T12:03:57.574297000Z . 
2021-07-14T12:03:57.574313900Z . * Create diabetes, split by control/not
2021-07-14T12:03:57.574318300Z . gen     diabcat = 1 if dm_type==0
2021-07-14T12:03:57.577433200Z (5,780 missing values generated)
2021-07-14T12:03:57.577453100Z 
2021-07-14T12:03:57.577459500Z . replace diabcat = 2 if dm_type==1 & inlist(hba1ccat, 0, 1)
2021-07-14T12:03:57.582012500Z (584 real changes made)
2021-07-14T12:03:57.582034500Z 
2021-07-14T12:03:57.582040600Z . replace diabcat = 3 if dm_type==1 & inlist(hba1ccat, 2, 3, 4)
2021-07-14T12:03:57.586000200Z (129 real changes made)
2021-07-14T12:03:57.586018500Z 
2021-07-14T12:03:57.586023600Z . replace diabcat = 4 if dm_type==2 & inlist(hba1ccat, 0, 1)
2021-07-14T12:03:57.590170900Z (3,716 real changes made)
2021-07-14T12:03:57.590185500Z 
2021-07-14T12:03:57.590189200Z . replace diabcat = 5 if dm_type==2 & inlist(hba1ccat, 2, 3, 4)
2021-07-14T12:03:57.594993900Z (872 real changes made)
2021-07-14T12:03:57.595008800Z 
2021-07-14T12:03:57.595014000Z . replace diabcat = 6 if dm_type==1 & hba1c_pct==. | dm_type==2 & hba1c_pct==.
2021-07-14T12:03:57.600103100Z (24 real changes made)
2021-07-14T12:03:57.600121700Z 
2021-07-14T12:03:57.600127500Z . 
2021-07-14T12:03:57.600132000Z . 
2021-07-14T12:03:57.600136500Z . label define diabcat    1 "No diabetes"                         ///
2021-07-14T12:03:57.600141600Z >                                                 2 "T1DM, controlled"         
2021-07-14T12:03:57.600147100Z >    ///
2021-07-14T12:03:57.600151700Z >                                                 3 "T1DM, uncontrolled"       
2021-07-14T12:03:57.600156600Z >    ///
2021-07-14T12:03:57.600160900Z >                                                 4 "T2DM, controlled"         
2021-07-14T12:03:57.600165700Z >    ///
2021-07-14T12:03:57.600170000Z >                                                 5 "T2DM, uncontrolled"       
2021-07-14T12:03:57.600174800Z >    ///
2021-07-14T12:03:57.600179200Z >                                                 6 "Diabetes, no HbA1c"
2021-07-14T12:03:57.600187600Z 
2021-07-14T12:03:57.600192500Z . label values diabcat diabcat
2021-07-14T12:03:57.600450900Z 
2021-07-14T12:03:57.600463400Z . safetab diabcat, m
2021-07-14T12:03:57.601030300Z 8
2021-07-14T12:03:57.608603500Z 
2021-07-14T12:03:57.608622400Z            diabcat |      Freq.     Percent        Cum.
2021-07-14T12:03:57.608626000Z -------------------+-----------------------------------
2021-07-14T12:03:57.608628900Z        No diabetes |     17,214       74.86       74.86
2021-07-14T12:03:57.608674000Z   T1DM, controlled |        584        2.54       77.40
2021-07-14T12:03:57.608680900Z T1DM, uncontrolled |        129        0.56       77.96
2021-07-14T12:03:57.608684100Z   T2DM, controlled |      3,716       16.16       94.12
2021-07-14T12:03:57.608686900Z T2DM, uncontrolled |        872        3.79       97.92
2021-07-14T12:03:57.608689600Z Diabetes, no HbA1c |         24        0.10       98.02
2021-07-14T12:03:57.608692300Z                  . |        455        1.98      100.00
2021-07-14T12:03:57.608695000Z -------------------+-----------------------------------
2021-07-14T12:03:57.608698000Z              Total |     22,994      100.00
2021-07-14T12:03:57.608701000Z 
2021-07-14T12:03:57.608703800Z . 
2021-07-14T12:03:57.608706600Z . 
2021-07-14T12:03:57.608709200Z . 
2021-07-14T12:03:57.608711900Z . /*  Asthma  */
2021-07-14T12:03:57.608714600Z . 
2021-07-14T12:03:57.608717200Z . 
2021-07-14T12:03:57.608720000Z . * Asthma  (coded: 0 No, 1 Yes no OCS, 2 Yes with OCS)
2021-07-14T12:03:57.608723100Z . rename asthma asthmacat
2021-07-14T12:03:57.608886600Z 
2021-07-14T12:03:57.608898600Z . recode asthmacat 0=1 1=2 2=3
2021-07-14T12:03:57.652834000Z (asthmacat: 4599 changes made)
2021-07-14T12:03:57.657940700Z 
2021-07-14T12:03:57.657985700Z . label define asthmacat 1 "No" 2 "Yes, no OCS" 3 "Yes with OCS"
2021-07-14T12:03:57.657998900Z 
2021-07-14T12:03:57.658003800Z . label values asthmacat asthmacat
2021-07-14T12:03:57.658309900Z 
2021-07-14T12:03:57.658321600Z . 
2021-07-14T12:03:57.658325300Z . gen asthma = (asthmacat==2|asthmacat==3)
2021-07-14T12:03:57.662938300Z 
2021-07-14T12:03:57.662956800Z . 
2021-07-14T12:03:57.662960300Z . /*  Probable shielding  */
2021-07-14T12:03:57.662963100Z . gen shield=1 if esrd==1 | other_transplant==1 | asthmacat==2 | asthmacat==3 |
2021-07-14T12:03:57.662966000Z >  ///
2021-07-14T12:03:57.662968800Z > chronic_respiratory_disease==1 | cancer_haem==1 | cancer_nonhaem==1 | ///
2021-07-14T12:03:57.662971900Z > asplenia==1 | other_immuno==1
2021-07-14T12:03:57.676273100Z (2,826 missing values generated)
2021-07-14T12:03:57.676298700Z 
2021-07-14T12:03:57.676305000Z . recode shield .=0
2021-07-14T12:03:57.689108200Z (shield: 2826 changes made)
2021-07-14T12:03:57.691056100Z 
2021-07-14T12:03:57.691068000Z . 
2021-07-14T12:03:57.691071700Z . 
2021-07-14T12:03:57.691074700Z . /* OUTCOME AND SURVIVAL TIME=================================================
2021-07-14T12:03:57.691088200Z > =*/
2021-07-14T12:03:57.691091900Z . 
2021-07-14T12:03:57.691094900Z . /*  Cohort entry and censor dates  */
2021-07-14T12:03:57.691097900Z . * Date of cohort entry, 1 Feb 2019
2021-07-14T12:03:57.691100800Z . gen enter_date = date("$indexdate", "DMY")
2021-07-14T12:03:57.708308400Z 
2021-07-14T12:03:57.708342300Z . 
2021-07-14T12:03:57.708346100Z . * Date of study end (typically: last date of outcome data available)
2021-07-14T12:03:57.708349100Z . **** NOTE!! NEEDS UPDATING!!!!
2021-07-14T12:03:57.708352100Z . gen tpp_infec_censor_date           = date("$tpp_infec_censor",         "DMY"
2021-07-14T12:03:57.708355100Z > )
2021-07-14T12:03:57.725002200Z 
2021-07-14T12:03:57.725043800Z . 
2021-07-14T12:03:57.725048200Z . * Format the dates
2021-07-14T12:03:57.725051100Z . format  enter_date                                      ///
2021-07-14T12:03:57.725054200Z >                 tpp_infec_censor_date   %td
2021-07-14T12:03:57.725057200Z 
2021-07-14T12:03:57.725060200Z . 
2021-07-14T12:03:57.725125700Z . 
2021-07-14T12:03:57.725142200Z .                         /****   Outcome definitions   ****/
2021-07-14T12:03:57.725288700Z . 
2021-07-14T12:03:57.725302000Z . 
2021-07-14T12:03:57.725306000Z . * Binary indicator for outcomes
2021-07-14T12:03:57.725309200Z . gen worms = (worms_date < .)
2021-07-14T12:03:57.728927700Z 
2021-07-14T12:03:57.728947100Z . 
2021-07-14T12:03:57.728953700Z .                                         /**** Create survival times  ****/
2021-07-14T12:03:57.728959200Z . * For looping later, name must be stime_binary_outcome_name
2021-07-14T12:03:57.728964200Z . 
2021-07-14T12:03:57.728969000Z . * Survival time = last followup date (first: end study, death, or that outcom
2021-07-14T12:03:57.728973200Z > e)
2021-07-14T12:03:57.728976400Z . gen stime_worms = min(tpp_infec_censor_date, died_date_ons, worms_date, dereg
2021-07-14T12:03:57.728979600Z > _date)
2021-07-14T12:03:57.736651400Z 
2021-07-14T12:03:57.736677600Z . 
2021-07-14T12:03:57.736683800Z . * If outcome was after censoring occurred, set to zero
2021-07-14T12:03:57.736687800Z . replace worms   = 0 if (worms_date      > tpp_infec_censor_date)
2021-07-14T12:03:57.742422300Z (2,694 real changes made)
2021-07-14T12:03:57.742445400Z 
2021-07-14T12:03:57.742451800Z . 
2021-07-14T12:03:57.742456800Z . * Format date variables
2021-07-14T12:03:57.742461600Z . format  stime* %td
2021-07-14T12:03:57.742466600Z 
2021-07-14T12:03:57.742471100Z . 
2021-07-14T12:03:57.742490100Z . 
2021-07-14T12:03:57.742496200Z . /* LABEL VARIABLES===========================================================
2021-07-14T12:03:57.742502000Z > =*/
2021-07-14T12:03:57.742506300Z . *  Label variables you are intending to keep, drop the rest
2021-07-14T12:03:57.742509400Z . 
2021-07-14T12:03:57.742512800Z . *HH variable
2021-07-14T12:03:57.742517200Z . label var kids_cat4 "Presence of children or young people in the household"
2021-07-14T12:03:57.742522000Z 
2021-07-14T12:03:57.742526800Z . label var  number_kids "Number of children aged 1-<12 years in household"
2021-07-14T12:03:57.742633700Z 
2021-07-14T12:03:57.742647800Z . label var  household_size "Number people in household"
2021-07-14T12:03:57.742654200Z 
2021-07-14T12:03:57.742659200Z . label var  household_id "Household ID"
2021-07-14T12:03:57.742984300Z 
2021-07-14T12:03:57.742998900Z . 
2021-07-14T12:03:57.743004600Z . 
2021-07-14T12:03:57.743009400Z . * Demographics
2021-07-14T12:03:57.743013900Z . label var patient_id                            "Patient ID"
2021-07-14T12:03:57.743019000Z 
2021-07-14T12:03:57.743023900Z . label var age                                           "Age (years)"
2021-07-14T12:03:57.743102200Z 
2021-07-14T12:03:57.743116100Z . label var agegroup                                      "Grouped age"
2021-07-14T12:03:57.743256600Z 
2021-07-14T12:03:57.743274100Z . label var age66                                         "66 years and older"
2021-07-14T12:03:57.743281300Z 
2021-07-14T12:03:57.743286200Z . label var sex                                           "Sex"
2021-07-14T12:03:57.743499000Z 
2021-07-14T12:03:57.743511700Z . label var male                                          "Male"
2021-07-14T12:03:57.743518000Z 
2021-07-14T12:03:57.743523500Z . label var bmi                                           "Body Mass Index (BMI
2021-07-14T12:03:57.743528300Z > , kg/m2)"
2021-07-14T12:03:57.743533200Z 
2021-07-14T12:03:57.743538100Z . label var bmicat                                        "Grouped BMI"
2021-07-14T12:03:57.743760500Z 
2021-07-14T12:03:57.743774900Z . label var bmi_measured_date             "Body Mass Index (BMI, kg/m2), date m
2021-07-14T12:03:57.743781600Z > easured"
2021-07-14T12:03:57.743786200Z 
2021-07-14T12:03:57.743790500Z . label var obese4cat                                     "Evidence of obesity 
2021-07-14T12:03:57.743795400Z > (4 categories)"
2021-07-14T12:03:57.744030900Z 
2021-07-14T12:03:57.744045100Z . label var smoke                                         "Smoking status"
2021-07-14T12:03:57.744064900Z 
2021-07-14T12:03:57.744071000Z . label var smoke_nomiss                          "Smoking status (missing set 
2021-07-14T12:03:57.744110300Z > to non)"
2021-07-14T12:03:57.744188200Z 
2021-07-14T12:03:57.744201900Z . label var imd                                           "Index of Multiple De
2021-07-14T12:03:57.744208300Z > privation (IMD)"
2021-07-14T12:03:57.744305500Z 
2021-07-14T12:03:57.744321500Z . label var ethnicity                                     "Ethnicity"
2021-07-14T12:03:57.744328500Z 
2021-07-14T12:03:57.744441900Z . label var stp                                           "Sustainability and T
2021-07-14T12:03:57.744454100Z > ransformation Partnership"
2021-07-14T12:03:57.744459900Z 
2021-07-14T12:03:57.744464200Z . lab var tot_adults_hh                           "Total number adults in hh"
2021-07-14T12:03:57.744702000Z 
2021-07-14T12:03:57.744714900Z . lab var kids_cat4                                        "Exposure (v2) with 
2021-07-14T12:03:57.744721700Z > 4-cats"
2021-07-14T12:03:57.744726200Z 
2021-07-14T12:03:57.744729100Z . 
2021-07-14T12:03:57.744731800Z . 
2021-07-14T12:03:57.744734700Z . * Comorbidities of interest
2021-07-14T12:03:57.744737800Z . label var asthma                                                "Asthma categ
2021-07-14T12:03:57.744741100Z > ory"
2021-07-14T12:03:57.744972700Z 
2021-07-14T12:03:57.744986500Z . label var egfr_cat                                              "Calculated e
2021-07-14T12:03:57.744992700Z > GFR"
2021-07-14T12:03:57.744997500Z 
2021-07-14T12:03:57.745001700Z . label var hypertension                              "Diagnosed hypertension"
2021-07-14T12:03:57.745107300Z 
2021-07-14T12:03:57.745120300Z . label var chronic_respiratory_disease   "Chronic Respiratory Diseases"
2021-07-14T12:03:57.745282400Z 
2021-07-14T12:03:57.745295500Z . label var chronic_cardiac_disease               "Chronic Cardiac Diseases"
2021-07-14T12:03:57.745417300Z 
2021-07-14T12:03:57.745431200Z . label var diabcat                                               "Diabetes"
2021-07-14T12:03:57.747937900Z 
2021-07-14T12:03:57.747952500Z . label var cancer_haem_cat                               "Haematological cance
2021-07-14T12:03:57.747958300Z > r"
2021-07-14T12:03:57.747963200Z 
2021-07-14T12:03:57.747967700Z . label var cancer_exhaem_cat                             "Non-haematological c
2021-07-14T12:03:57.747972900Z > ancer"
2021-07-14T12:03:57.747978100Z 
2021-07-14T12:03:57.747988700Z . label var kidney_transplant                             "Kidney transplant"
2021-07-14T12:03:57.747992000Z 
2021-07-14T12:03:57.748039000Z . label var other_transplant                              "Other solid organ tr
2021-07-14T12:03:57.748045000Z > ansplant"
2021-07-14T12:03:57.748048200Z 
2021-07-14T12:03:57.748051000Z . label var asplenia                                              "Asplenia"
2021-07-14T12:03:57.748054100Z 
2021-07-14T12:03:57.748056900Z . label var other_immuno                                  "Immunosuppressed (co
2021-07-14T12:03:57.748060100Z > mbination algorithm)"
2021-07-14T12:03:57.748063100Z 
2021-07-14T12:03:57.748065900Z . label var chronic_liver_disease                 "Chronic liver disease"
2021-07-14T12:03:57.748069100Z 
2021-07-14T12:03:57.748071900Z . label var other_neuro                                   "Neurological disease
2021-07-14T12:03:57.748074800Z > "
2021-07-14T12:03:57.748097500Z 
2021-07-14T12:03:57.748102100Z . label var stroke_dementia                           "Stroke or dementia"
2021-07-14T12:03:57.748105400Z 
2021-07-14T12:03:57.748108100Z . label var ra_sle_psoriasis                              "Autoimmune disease"
2021-07-14T12:03:57.748111200Z 
2021-07-14T12:03:57.748114000Z . lab var egfr                                                    eGFR
2021-07-14T12:03:57.748117100Z 
2021-07-14T12:03:57.748119900Z . lab var perm_immunodef                                  "Permanent immunosupp
2021-07-14T12:03:57.748123100Z > ression"
2021-07-14T12:03:57.748126000Z 
2021-07-14T12:03:57.748128900Z . lab var temp_immunodef                                  "Temporary immunosupp
2021-07-14T12:03:57.748131900Z > ression"
2021-07-14T12:03:57.748134600Z 
2021-07-14T12:03:57.748137300Z . lab var esrd                                                    "End-stage re
2021-07-14T12:03:57.748140500Z > nal disease"
2021-07-14T12:03:57.748143500Z 
2021-07-14T12:03:57.748146300Z . 
2021-07-14T12:03:57.748149200Z . label var hypertension_date                                     "Diagnosed hy
2021-07-14T12:03:57.748152400Z > pertension Date"
2021-07-14T12:03:57.748155300Z 
2021-07-14T12:03:57.748158000Z . label var chronic_respiratory_disease_date      "Other Respiratory Diseases D
2021-07-14T12:03:57.748161100Z > ate"
2021-07-14T12:03:57.748164000Z 
2021-07-14T12:03:57.748166800Z . label var chronic_cardiac_disease_date          "Other Heart Diseases Date"
2021-07-14T12:03:57.748170000Z 
2021-07-14T12:03:57.748172900Z . label var diabetes_date                                         "Diabetes Dat
2021-07-14T12:03:57.748181200Z > e"
2021-07-14T12:03:57.748184200Z 
2021-07-14T12:03:57.748186900Z . label var cancer_haem_date                                      "Haem cancer 
2021-07-14T12:03:57.748189900Z > Date"
2021-07-14T12:03:57.748192700Z 
2021-07-14T12:03:57.748195600Z . label var cancer_nonhaem_date                           "Non-haem cancer Date
2021-07-14T12:03:57.748198800Z > "
2021-07-14T12:03:57.748201700Z 
2021-07-14T12:03:57.748204600Z . label var chronic_liver_disease_date            "Chronic liver disease Date"
2021-07-14T12:03:57.748207600Z 
2021-07-14T12:03:57.748210400Z . label var other_neuro_date                                      "Neurological
2021-07-14T12:03:57.748213400Z >  disease  Date"
2021-07-14T12:03:57.748216300Z 
2021-07-14T12:03:57.748219200Z . label var stroke_dementia_date                      "Stroke or dementia date"
2021-07-14T12:03:57.748222400Z 
2021-07-14T12:03:57.748226100Z . label var ra_sle_psoriasis_date                         "Autoimmune disease  
2021-07-14T12:03:57.748229400Z > Date"
2021-07-14T12:03:57.748232200Z 
2021-07-14T12:03:57.748234900Z . lab var perm_immunodef_date                             "Permanent immunosupp
2021-07-14T12:03:57.748237900Z > ression date"
2021-07-14T12:03:57.748240900Z 
2021-07-14T12:03:57.748243700Z . lab var temp_immunodef_date                             "Temporary immunosupp
2021-07-14T12:03:57.748246800Z > ression date"
2021-07-14T12:03:57.748249800Z 
2021-07-14T12:03:57.748252700Z . label var kidney_transplant_date                                             
2021-07-14T12:03:57.748255900Z >    "Kidney transplant"
2021-07-14T12:03:57.748258900Z 
2021-07-14T12:03:57.748261600Z . label var other_transplant_date                                         "Othe
2021-07-14T12:03:57.748264700Z > r solid organ transplant"
2021-07-14T12:03:57.748267800Z 
2021-07-14T12:03:57.748270700Z . label var asplenia_date                                                 "Aspl
2021-07-14T12:03:57.748273900Z > enia date"
2021-07-14T12:03:57.748276900Z 
2021-07-14T12:03:57.748279500Z . lab var  bphigh "non-missing indicator of known high blood pressure"
2021-07-14T12:03:57.748282600Z 
2021-07-14T12:03:57.748285300Z . lab var bpcat "Blood pressure four levels, non-missing"
2021-07-14T12:03:57.748288400Z 
2021-07-14T12:03:57.748291300Z . lab var htdiag_or_highbp "High blood pressure or hypertension diagnosis"
2021-07-14T12:03:57.748294500Z 
2021-07-14T12:03:57.748297300Z . lab var shield "Probable shielding"
2021-07-14T12:03:57.748303200Z 
2021-07-14T12:03:57.748306000Z . 
2021-07-14T12:03:57.748308700Z . *Key DATES
2021-07-14T12:03:57.748311500Z . label var   died_date_ons                               "Date death ONS"
2021-07-14T12:03:57.748314600Z 
2021-07-14T12:03:57.748317500Z . label var enter_date                                    "Date of study entry"
2021-07-14T12:03:57.748320700Z 
2021-07-14T12:03:57.748323500Z . lab var  dereg_date                                             "Date deregis
2021-07-14T12:03:57.748326700Z > tration from practice"
2021-07-14T12:03:57.748329500Z 
2021-07-14T12:03:57.748332200Z . 
2021-07-14T12:03:57.748334900Z . 
2021-07-14T12:03:57.748337700Z . *Control outcome
2021-07-14T12:03:57.748340700Z . label var   worms                               "Failure/censoring indicator 
2021-07-14T12:03:57.748344000Z > for outcome: worms"
2021-07-14T12:03:57.748347000Z 
2021-07-14T12:03:57.748349900Z . label var   worms_date                  "Date of worms"
2021-07-14T12:03:57.748352800Z 
2021-07-14T12:03:57.748355500Z . label var  stime_worms                  "Survival time (date); outcome worms"
2021-07-14T12:03:57.748358600Z 
2021-07-14T12:03:57.748361300Z . 
2021-07-14T12:03:57.748364200Z . 
2021-07-14T12:03:57.748367100Z . 
2021-07-14T12:03:57.748370000Z . /* TIDY DATA=================================================================
2021-07-14T12:03:57.748373200Z > =*/
2021-07-14T12:03:57.748376000Z . *  Drop variables that are not needed (those not labelled)
2021-07-14T12:03:57.748379100Z . ds, not(varlabel)
2021-07-14T12:03:57.751467900Z ethnicity_~e  smoki~s_date  care_home_~e  asthmacat     SCr_adj
2021-07-14T12:03:57.751670200Z bmi_measured  hba1c_mmol~e  bp_sys        diabetes      min
2021-07-14T12:03:57.752015200Z bp_sys_dat~e  hba1c_per~te  bp_dias       male_drop     max
2021-07-14T12:03:57.752242300Z bp_sys_dat~d  cancer_haem   creatinine    age_drop      hba1c_pct
2021-07-14T12:03:57.752575700Z bp_dias_da~e  cancer_non~m  diabetes_t~e  imd_drop      dm_type
2021-07-14T12:03:57.752875400Z bp_dias_da~d  esrf_date     diabetes_e~s  kids_cat5     dm_type_ex~s
2021-07-14T12:03:57.753218900Z crea~te_date  esrf          diabetes_e~r  nokids        hba1ccat
2021-07-14T12:03:57.753599100Z crea~ne_date  dialysis_d~e  hba1c_mmol~l  bmi_time      hba1c75
2021-07-14T12:03:57.753822100Z smoki~e_date  dialysis      hba1c_per~ge  bmi_age       tpp_infec_~e
2021-07-14T12:03:57.753835900Z 
2021-07-14T12:03:57.753841300Z . drop `r(varlist)'
2021-07-14T12:03:57.758735900Z 
2021-07-14T12:03:57.758757600Z . 
2021-07-14T12:03:57.758784400Z . 
2021-07-14T12:03:57.758789000Z . /* APPLY INCLUSION/EXCLUIONS=================================================
2021-07-14T12:03:57.758793000Z > =*/
2021-07-14T12:03:57.758796800Z . noi di "DROP AGE >110:"
2021-07-14T12:03:57.758801000Z DROP AGE >110:
2021-07-14T12:03:57.758805000Z 
2021-07-14T12:03:57.758808700Z . drop if age > 110 & age != .
2021-07-14T12:03:57.762999900Z (0 observations deleted)
2021-07-14T12:03:57.763024900Z 
2021-07-14T12:03:57.763031000Z . 
2021-07-14T12:03:57.763036000Z . noi di "DROP IF DIED BEFORE INDEX"
2021-07-14T12:03:57.763041300Z DROP IF DIED BEFORE INDEX
2021-07-14T12:03:57.763046200Z 
2021-07-14T12:03:57.763051800Z . drop if died_date_ons <= date("$indexdate", "DMY")
2021-07-14T12:03:57.791853100Z (4,340 observations deleted)
2021-07-14T12:03:57.791873800Z 
2021-07-14T12:03:57.791877500Z . 
2021-07-14T12:03:57.791880500Z . noi di "DROP IF DIED BEFORE INDEX"
2021-07-14T12:03:57.791883600Z DROP IF DIED BEFORE INDEX
2021-07-14T12:03:57.791886500Z 
2021-07-14T12:03:57.791889500Z . drop if died_date_ons <= date("$indexdate", "DMY")
2021-07-14T12:03:57.807428900Z (0 observations deleted)
2021-07-14T12:03:57.807458400Z 
2021-07-14T12:03:57.807465300Z . 
2021-07-14T12:03:57.807470500Z . noi di "DROP NO ETHNICITY DATA"
2021-07-14T12:03:57.807475400Z DROP NO ETHNICITY DATA
2021-07-14T12:03:57.807479900Z 
2021-07-14T12:03:57.807484900Z . keep if ethnicity!=.u
2021-07-14T12:03:57.812055800Z (4,642 observations deleted)
2021-07-14T12:03:57.812076600Z 
2021-07-14T12:03:57.812082000Z . 
2021-07-14T12:03:57.812086100Z . ***************
2021-07-14T12:03:57.812090100Z . *  Save data  *
2021-07-14T12:03:57.812093900Z . ***************
2021-07-14T12:03:57.812098100Z . sort patient_id
2021-07-14T12:03:57.826350000Z 
2021-07-14T12:03:57.826373300Z . save $tempdir/analysis_dataset_worms, replace
2021-07-14T12:03:57.830163400Z (note: file tempdata/analysis_dataset_worms.dta not found)
2021-07-14T12:03:57.830195700Z file tempdata/analysis_dataset_worms.dta saved
2021-07-14T12:03:57.830201300Z 
2021-07-14T12:03:57.830205400Z . 
2021-07-14T12:03:57.830209700Z . 
2021-07-14T12:03:57.830213600Z . 
2021-07-14T12:03:57.830217300Z . use  $tempdir/analysis_dataset_worms, clear
2021-07-14T12:03:57.832264400Z 
2021-07-14T12:03:57.832282500Z . keep if age66==0
2021-07-14T12:03:57.835889900Z (3,010 observations deleted)
2021-07-14T12:03:57.835910400Z 
2021-07-14T12:03:57.835914900Z . * Create restricted cubic splines for age
2021-07-14T12:03:57.835919300Z . mkspline age = age, cubic nknots(4)
2021-07-14T12:03:57.882959700Z 
2021-07-14T12:03:57.882982700Z . save $tempdir/analysis_dataset_worms_ageband_0, replace
2021-07-14T12:03:57.885978900Z (note: file tempdata/analysis_dataset_worms_ageband_0.dta not found)
2021-07-14T12:03:57.886000900Z file tempdata/analysis_dataset_worms_ageband_0.dta saved
2021-07-14T12:03:57.886004300Z 
2021-07-14T12:03:57.886007000Z . 
2021-07-14T12:03:57.886009700Z . 
2021-07-14T12:03:57.886012300Z . use  $tempdir/analysis_dataset_worms, clear
2021-07-14T12:03:57.888051000Z 
2021-07-14T12:03:57.888070000Z . keep if age66==1
2021-07-14T12:03:57.891304100Z (11,002 observations deleted)
2021-07-14T12:03:57.891320900Z 
2021-07-14T12:03:57.891324000Z . * Create restricted cubic splines for age
2021-07-14T12:03:57.891327700Z . mkspline age = age, cubic nknots(4)
2021-07-14T12:03:57.903742200Z 
2021-07-14T12:03:57.903762600Z . save $tempdir/analysis_dataset_worms_ageband_1, replace
2021-07-14T12:03:57.904644500Z (note: file tempdata/analysis_dataset_worms_ageband_1.dta not found)
2021-07-14T12:03:57.904659200Z file tempdata/analysis_dataset_worms_ageband_1.dta saved
2021-07-14T12:03:57.904663400Z 
2021-07-14T12:03:57.904666300Z . 
2021-07-14T12:03:57.904669000Z . 
2021-07-14T12:03:57.904671700Z . *STSET data
2021-07-14T12:03:57.904674400Z . forvalues x=0/1 {
2021-07-14T12:03:57.904677200Z   2. use $tempdir/analysis_dataset_worms_ageband_`x', clear
2021-07-14T12:03:57.904680200Z   3. * Save a version set on NON ONS covid death outcome
2021-07-14T12:03:57.904682900Z . stset stime_worms, fail(worms)                          ///
2021-07-14T12:03:57.904685800Z >         id(patient_id) enter(enter_date) origin(enter_date)
2021-07-14T12:03:57.904689000Z   4. save "$tempdir/cr_create_analysis_dataset_STSET_worms_ageband_`x'.dta", re
2021-07-14T12:03:57.904692200Z > place
2021-07-14T12:03:57.904694900Z   5. 
2021-07-14T12:03:57.904697600Z . }
2021-07-14T12:03:58.166901300Z 
2021-07-14T12:03:58.166929300Z                 id:  patient_id
2021-07-14T12:03:58.166935100Z      failure event:  worms != 0 & worms < .
2021-07-14T12:03:58.166940600Z obs. time interval:  (stime_worms[_n-1], stime_worms]
2021-07-14T12:03:58.166945000Z  enter on or after:  time enter_date
2021-07-14T12:03:58.166949400Z  exit on or before:  failure
2021-07-14T12:03:58.167042000Z     t for analysis:  (time-origin)
2021-07-14T12:03:58.167070700Z             origin:  time enter_date
2021-07-14T12:03:58.167187400Z 
2021-07-14T12:03:58.167201700Z ------------------------------------------------------------------------------
2021-07-14T12:03:58.167208000Z      11,002  total observations
2021-07-14T12:03:58.168562500Z           0  exclusions
2021-07-14T12:03:58.168577100Z ------------------------------------------------------------------------------
2021-07-14T12:03:58.168582600Z      11,002  observations remaining, representing
2021-07-14T12:03:58.191715700Z      11,002  subjects
2021-07-14T12:03:58.220668200Z         888  failures in single-failure-per-subject data
2021-07-14T12:03:58.274241000Z   3,841,504  total analysis time at risk and under observation
2021-07-14T12:03:58.274281500Z                                                 at risk from t =         0
2021-07-14T12:03:58.275482400Z                                      earliest observed entry t =         0
2021-07-14T12:03:58.276305600Z                                           last observed exit t =       365
2021-07-14T12:03:58.348305900Z (note: file tempdata/cr_create_analysis_dataset_STSET_worms_ageband_0.dta not f
2021-07-14T12:03:58.348329300Z > ound)
2021-07-14T12:03:58.348335700Z file tempdata/cr_create_analysis_dataset_STSET_worms_ageband_0.dta saved
2021-07-14T12:03:58.348341000Z 
2021-07-14T12:03:58.348345700Z                 id:  patient_id
2021-07-14T12:03:58.348351000Z      failure event:  worms != 0 & worms < .
2021-07-14T12:03:58.348356400Z obs. time interval:  (stime_worms[_n-1], stime_worms]
2021-07-14T12:03:58.348363700Z  enter on or after:  time enter_date
2021-07-14T12:03:58.348368600Z  exit on or before:  failure
2021-07-14T12:03:58.348373200Z     t for analysis:  (time-origin)
2021-07-14T12:03:58.348377800Z             origin:  time enter_date
2021-07-14T12:03:58.348382400Z 
2021-07-14T12:03:58.348386900Z ------------------------------------------------------------------------------
2021-07-14T12:03:58.348526400Z       3,010  total observations
2021-07-14T12:03:58.348930700Z           0  exclusions
2021-07-14T12:03:58.348945100Z ------------------------------------------------------------------------------
2021-07-14T12:03:58.348951400Z       3,010  observations remaining, representing
2021-07-14T12:03:58.360968000Z       3,010  subjects
2021-07-14T12:03:58.371268700Z         254  failures in single-failure-per-subject data
2021-07-14T12:03:58.391592000Z   1,050,978  total analysis time at risk and under observation
2021-07-14T12:03:58.391640000Z                                                 at risk from t =         0
2021-07-14T12:03:58.392595100Z                                      earliest observed entry t =         0
2021-07-14T12:03:58.393607100Z                                           last observed exit t =       365
2021-07-14T12:03:58.396937300Z (note: file tempdata/cr_create_analysis_dataset_STSET_worms_ageband_1.dta not f
2021-07-14T12:03:58.396957600Z > ound)
2021-07-14T12:03:58.396964000Z file tempdata/cr_create_analysis_dataset_STSET_worms_ageband_1.dta saved
2021-07-14T12:03:58.396969300Z 
2021-07-14T12:03:58.396973700Z . 
2021-07-14T12:03:58.396978600Z . 
2021-07-14T12:03:58.396983600Z . * Close log file
2021-07-14T12:03:58.396989000Z . log close
2021-07-14T12:03:58.397097800Z       name:  <unnamed>
2021-07-14T12:03:58.397114500Z        log:  /workspace/log/WORMS_01_cr_analysis_dataset.log
2021-07-14T12:03:58.397121500Z   log type:  text
2021-07-14T12:03:58.397127000Z  closed on:  14 Jul 2021, 12:03:58
2021-07-14T12:03:58.397132400Z -------------------------------------------------------------------------------
2021-07-14T12:03:58.401867700Z 
2021-07-14T12:03:58.401898400Z . 
2021-07-14T12:03:58.401905300Z . 
2021-07-14T12:03:58.401910300Z end of do-file
2021-07-14T12:03:58.401915800Z 
2021-07-14T12:03:58.401921900Z . . file open output using "/tmp/tmp.0JvMt3tIAT", write text replace
2021-07-14T12:03:58.401927400Z 
2021-07-14T12:03:58.401932300Z . . file write output "success" 
2021-07-14T12:03:58.401939200Z 
2021-07-14T12:03:58.401944100Z . . file close output
2021-07-14T12:03:58.401948700Z 
2021-07-14T12:03:58.401953000Z . 
2021-07-14T12:03:58.401958200Z end of do-file
2021-07-14T12:03:58.401967300Z 
2021-07-14T12:03:58.401972700Z 
2021-07-14T12:03:58.436448100Z . 

state: succeeded
commit: none
docker_image_id: sha256:2cfae55f0ae53b85c43f26639279eb9d1deb03aff879163255761854461f4ca9
exit_code: 0
job_id: wt3vz37zwfz565u6
run_by_user: qc18278
created_at: 2021-07-14T12:02:51Z
started_at: 2021-07-14T12:03:52Z
completed_at: 2021-07-14T12:04:15Z

Completed successfully

outputs:
  log/WORMS_01_cr_analysis_dataset.log                           - moderately_sensitive
  tempdata/analysis_dataset_worms.dta                            - highly_sensitive    
  tempdata/analysis_dataset_worms_ageband_0.dta                  - highly_sensitive    
  tempdata/analysis_dataset_worms_ageband_1.dta                  - highly_sensitive    
  tempdata/cr_create_analysis_dataset_STSET_worms_ageband_0.dta  - highly_sensitive    
  tempdata/cr_create_analysis_dataset_STSET_worms_ageband_1.dta  - highly_sensitive    